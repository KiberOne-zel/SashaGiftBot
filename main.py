import telebot
import logging
import json
import time
from typing import Dict, List, Optional, Tuple
from datetime import datetime
import random
from collections import defaultdict
from telebot import types
from openai import OpenAI
import requests

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OpenAI –∫–ª–∏–µ–Ω—Ç–∞ (DeepSeek)
client = OpenAI(
    api_key="",
    base_url=""
)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
bot = telebot.TeleBot("")

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
GIFT_DATABASE = {
    "–≤–æ–∑—Ä–∞—Å—Ç": {
        "0-3": {
            "–∫–∞—Ç–µ–≥–æ—Ä–∏–∏": {
                "—Ä–∞–∑–≤–∏–≤–∞—é—â–∏–µ": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫—É–±", "—Ü–µ–Ω–∞": "1500-3000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–†–∞–∑–≤–∏–≤–∞–µ—Ç –º–µ–ª–∫—É—é –º–æ—Ç–æ—Ä–∏–∫—É –∏ –ª–æ–≥–∏–∫—É", "—Ä–µ–π—Ç–∏–Ω–≥": 4.8, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 95},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ú—è–≥–∫–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä", "—Ü–µ–Ω–∞": "800-2000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫—Ä—É–ø–Ω—ã–µ –¥–µ—Ç–∞–ª–∏", "—Ä–µ–π—Ç–∏–Ω–≥": 4.6, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 87},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –∫–æ–≤—Ä–∏–∫", "—Ü–µ–Ω–∞": "2000-4000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–†–∞–∑–≤–∏–≤–∞–µ—Ç —Å–ª—É—Ö –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 92},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–°–æ—Ä—Ç–µ—Ä —Å —Ñ–∏–≥—É—Ä–∫–∞–º–∏", "—Ü–µ–Ω–∞": "1000-2500 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–£—á–∏–º —Ñ–æ—Ä–º—ã –∏ —Ü–≤–µ—Ç–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.8, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 94},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–†–∞–∑–≤–∏–≤–∞—é—â–∏–π —Ü–µ–Ω—Ç—Ä", "—Ü–µ–Ω–∞": "3000-6000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–≥—Ä—É—à–∫–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.9, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 98}
                ],
                "—Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ü–∞–ª—å—á–∏–∫–æ–≤—ã–µ –∫—Ä–∞—Å–∫–∏", "—Ü–µ–Ω–∞": "500-1500 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –¥–ª—è –º–∞–ª—ã—à–µ–π", "—Ä–µ–π—Ç–∏–Ω–≥": 4.5, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 82},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ö–∏–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Å–æ–∫", "—Ü–µ–Ω–∞": "1000-2500 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–†–∞–∑–≤–∏–≤–∞–µ—Ç —Ç–∞–∫—Ç–∏–ª—å–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è", "—Ä–µ–π—Ç–∏–Ω–≥": 4.6, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 88},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ù–∞–±–æ—Ä –¥–ª—è –ª–µ–ø–∫–∏", "—Ü–µ–Ω–∞": "800-2000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–¢–µ—Å—Ç–æ –¥–ª—è –ª–µ–ø–∫–∏ —Å —Ñ–æ—Ä–º–æ—á–∫–∞–º–∏", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 85}
                ],
                "–ø—Ä–∞–∫—Ç–∏—á–Ω—ã–µ": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ù–∞–±–æ—Ä –¥–µ—Ç—Å–∫–æ–π –ø–æ—Å—É–¥—ã", "—Ü–µ–Ω–∞": "1200-3000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ù–µ–±—å—é—â–∞—è—Å—è, —è—Ä–∫–∞—è –ø–æ—Å—É–¥–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.4, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 80},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–¢–µ—Ä–º–æ–∫—Ä—É–∂–∫–∞-–Ω–µ–ø—Ä–æ–ª–∏–≤–∞–π–∫–∞", "—Ü–µ–Ω–∞": "800-1800 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –Ω–∞–ø–∏—Ç–∫–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 89},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ù–æ—á–Ω–∏–∫-–ø—Ä–æ–µ–∫—Ç–æ—Ä", "—Ü–µ–Ω–∞": "1500-3000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ó–≤–µ–∑–¥–Ω–æ–µ –Ω–µ–±–æ", "—Ä–µ–π—Ç–∏–Ω–≥": 4.8, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 96}
                ]
            },
            "–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ_–±—Ä–µ–Ω–¥—ã": ["Fisher-Price", "Chicco", "Taf Toys", "Bright Starts"],
            "—Å–æ–≤–µ—Ç—ã": "–í—ã–±–∏—Ä–∞–π—Ç–µ —è—Ä–∫–∏–µ, –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏ –±–µ–∑ –º–µ–ª–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π"
        },
        "4-6": {
            "–∫–∞—Ç–µ–≥–æ—Ä–∏–∏": {
                "–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≥–ª–æ–±—É—Å", "—Ü–µ–Ω–∞": "2500-5000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ò–∑—É—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω –∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö", "—Ä–µ–π—Ç–∏–Ω–≥": 4.9, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 97},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ù–∞–±–æ—Ä –¥–ª—è –æ–ø—ã—Ç–æ–≤", "—Ü–µ–Ω–∞": "1500-3500 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ü—Ä–æ—Å—Ç—ã–µ —Ö–∏–º–∏—á–µ—Å–∫–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 91},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ì–æ–≤–æ—Ä—è—â–∞—è –∞–∑–±—É–∫–∞", "—Ü–µ–Ω–∞": "2000-4000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–£—á–∏–º –±—É–∫–≤—ã –≤–µ—Å–µ–ª–æ", "—Ä–µ–π—Ç–∏–Ω–≥": 4.8, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 94}
                ],
                "–∞–∫—Ç–∏–≤–Ω—ã–µ": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–°–∞–º–æ–∫–∞—Ç", "—Ü–µ–Ω–∞": "2000-6000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–†–∞–∑–≤–∏–≤–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –∏ –±–∞–ª–∞–Ω—Å", "—Ä–µ–π—Ç–∏–Ω–≥": 4.8, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 96},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ë–∞—Ç—É—Ç –¥–æ–º–∞—à–Ω–∏–π", "—Ü–µ–Ω–∞": "3000-8000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–î–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è", "—Ä–µ–π—Ç–∏–Ω–≥": 4.6, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 88},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–í–µ–ª–æ—Å–∏–ø–µ–¥ –±–µ–≥–æ–≤–µ–ª", "—Ü–µ–Ω–∞": "2500-5000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –≤–µ–ª–æ—Å–∏–ø–µ–¥—É", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 90}
                ],
                "–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "LEGO DUPLO", "—Ü–µ–Ω–∞": "1000-5000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ö—Ä—É–ø–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è –¥–æ—à–∫–æ–ª—å–Ω–∏–∫–æ–≤", "—Ä–µ–π—Ç–∏–Ω–≥": 4.9, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 99},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ú–∞–≥–Ω–∏—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä", "—Ü–µ–Ω–∞": "2000-4500 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–†–∞–∑–≤–∏–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 93}
                ]
            },
            "–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ_–±—Ä–µ–Ω–¥—ã": ["LEGO", "Hasbro", "Ravensburger", "Play-Doh"],
            "—Å–æ–≤–µ—Ç—ã": "–ò–≥—Ä—É—à–∫–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏"
        },
        "7-12": {
            "–∫–∞—Ç–µ–≥–æ—Ä–∏–∏": {
                "–Ω–∞—É—á–Ω—ã–µ": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ú–∏–∫—Ä–æ—Å–∫–æ–ø –¥–µ—Ç—Å–∫–∏–π", "—Ü–µ–Ω–∞": "3000-7000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ù–∞–±–æ—Ä —é–Ω–æ–≥–æ –±–∏–æ–ª–æ–≥–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.8, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 94},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–†–æ–±–æ—Ç-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä", "—Ü–µ–Ω–∞": "4000-12000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º–∞—è –∏–≥—Ä—É—à–∫–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.9, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 98},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–¢–µ–ª–µ—Å–∫–æ–ø", "—Ü–µ–Ω–∞": "5000-15000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ù–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ –∑–≤–µ–∑–¥–∞–º–∏", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 91}
                ],
                "—Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–í–µ–ª–æ—Å–∏–ø–µ–¥", "—Ü–µ–Ω–∞": "5000-15000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–†–∞–∑–º–µ—Ä –ø–æ–¥ —Ä–æ—Å—Ç —Ä–µ–±–µ–Ω–∫–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 92},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–†–æ–ª–∏–∫–æ–≤—ã–µ –∫–æ–Ω—å–∫–∏", "—Ü–µ–Ω–∞": "3000-8000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–° –∑–∞—â–∏—Ç–Ω—ã–º –∫–æ–º–ø–ª–µ–∫—Ç–æ–º", "—Ä–µ–π—Ç–∏–Ω–≥": 4.6, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 87},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–°–∫–µ–π—Ç–±–æ—Ä–¥", "—Ü–µ–Ω–∞": "2500-6000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–î–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.5, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 85}
                ],
                "–Ω–∞—Å—Ç–æ–ª—å–Ω—ã–µ_–∏–≥—Ä—ã": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ú–æ–Ω–æ–ø–æ–ª–∏—è", "—Ü–µ–Ω–∞": "1500-3500 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.9, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 97},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–®–∞—Ö–º–∞—Ç—ã", "—Ü–µ–Ω–∞": "1000-3000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–µ", "—Ä–µ–π—Ç–∏–Ω–≥": 4.8, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 93}
                ]
            },
            "–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ_–±—Ä–µ–Ω–¥—ã": ["LEGO Technic", "Crayola", "Nerf", "VTech"],
            "—Å–æ–≤–µ—Ç—ã": "–£—á–∏—Ç—ã–≤–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã –∏ —Ö–æ–±–±–∏ —Ä–µ–±–µ–Ω–∫–∞"
        },
        "13-17": {
            "–∫–∞—Ç–µ–≥–æ—Ä–∏–∏": {
                "—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ù–∞—É—à–Ω–∏–∫–∏ –∏–≥—Ä–æ–≤—ã–µ", "—Ü–µ–Ω–∞": "3000-10000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–° –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º –∏ –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π", "—Ä–µ–π—Ç–∏–Ω–≥": 4.8, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 95},
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "Power Bank", "—Ü–µ–Ω–∞": "1500-5000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–í—ã—Å–æ–∫–∞—è –µ–º–∫–æ—Å—Ç—å, –±—ã—Å—Ç—Ä–∞—è –∑–∞—Ä—è–¥–∫–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 92}
                ],
                "–º–æ–¥–∞": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ë—Ä–µ–Ω–¥–æ–≤–∞—è —Ç–æ–ª—Å—Ç–æ–≤–∫–∞", "—Ü–µ–Ω–∞": "3000-8000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–°—Ç–∏–ª—å–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –≥–∞—Ä–¥–µ—Ä–æ–±–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.5, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 88}
                ]
            },
            "–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ_–±—Ä–µ–Ω–¥—ã": ["Apple", "Nike", "Adidas", "Xiaomi"],
            "—Å–æ–≤–µ—Ç—ã": "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≥–∞–¥–∂–µ—Ç—ã –∏ —Å—Ç–∏–ª—å–Ω—ã–µ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã"
        },
        "18-25": {
            "–∫–∞—Ç–µ–≥–æ—Ä–∏–∏": {
                "–≥–∞–¥–∂–µ—Ç—ã": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–£–º–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞", "—Ü–µ–Ω–∞": "5000-15000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ì–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ —Å –º—É–∑—ã–∫–æ–π", "—Ä–µ–π—Ç–∏–Ω–≥": 4.8, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 96}
                ],
                "–∫–æ—Å–º–µ—Ç–∏–∫–∞": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ù–∞–±–æ—Ä –∫–æ—Å–º–µ—Ç–∏–∫–∏", "—Ü–µ–Ω–∞": "2000-7000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–õ—é–∫—Å–æ–≤–∞—è –∏–ª–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 91}
                ]
            },
            "–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ_–±—Ä–µ–Ω–¥—ã": ["Apple", "Dyson", "Sephora", "Xiaomi"],
            "—Å–æ–≤–µ—Ç—ã": "–ü—Ä–∞–∫—Ç–∏—á–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏ –∏–ª–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è"
        },
        "26-40": {
            "–∫–∞—Ç–µ–≥–æ—Ä–∏–∏": {
                "–¥–ª—è_–¥–æ–º–∞": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–£–º–Ω–∞—è –ª–∞–º–ø–∞", "—Ü–µ–Ω–∞": "2000-6000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 90}
                ],
                "—Ç–µ—Ö–Ω–∏–∫–∞": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ù–∞–±–æ—Ä –∫—É—Ö–æ–Ω–Ω—ã—Ö –Ω–æ–∂–µ–π", "—Ü–µ–Ω–∞": "4000-12000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ, –æ—Å—Ç—Ä—ã–µ", "—Ä–µ–π—Ç–∏–Ω–≥": 4.9, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 97}
                ]
            },
            "–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ_–±—Ä–µ–Ω–¥—ã": ["Bosch", "Philips", "Tefal", "Zwilling"],
            "—Å–æ–≤–µ—Ç—ã": "–ü—Ä–∞–∫—Ç–∏—á–Ω—ã–µ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–µ—â–∏ –¥–ª—è –¥–æ–º–∞"
        },
        "40+": {
            "–∫–∞—Ç–µ–≥–æ—Ä–∏–∏": {
                "–∑–¥–æ—Ä–æ–≤—å–µ": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ú–∞—Å—Å–∞–∂–µ—Ä –¥–ª—è —à–µ–∏", "—Ü–µ–Ω–∞": "3000-8000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–° –ø—Ä–æ–≥—Ä–µ–≤–æ–º –∏ –≤–∏–±—Ä–∞—Ü–∏–µ–π", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 93}
                ],
                "—Ö–æ–±–±–∏": [
                    {"–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ù–∞–±–æ—Ä –¥–ª—è —Å–∞–¥–æ–≤–æ–¥–∞", "—Ü–µ–Ω–∞": "3000-7000 —Ä—É–±", "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã", "—Ä–µ–π—Ç–∏–Ω–≥": 4.7, "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 89}
                ]
            },
            "–ø–æ–ø—É–ª—è—Ä–Ω—ã–µ_–±—Ä–µ–Ω–¥—ã": ["Braun", "Oral-B", "Casio", "Parker"],
            "—Å–æ–≤–µ—Ç—ã": "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏, –∑–∞–±–æ—Ç–∞ –æ –∑–¥–æ—Ä–æ–≤—å–µ"
        }
    },
    
    "–ø–æ–≤–æ–¥": {
        "–¥–µ–Ω—å_—Ä–æ–∂–¥–µ–Ω–∏—è": {
            "–±—é–¥–∂–µ—Ç–Ω—ã–µ": ["–ö–Ω–∏–≥–∞", "–°–ª–∞–¥–æ—Å—Ç–∏ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã", "–î–æ–º–∞—à–Ω–µ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ", "–ù–∞–±–æ—Ä —á–∞—è/–∫–æ—Ñ–µ"],
            "—Å—Ä–µ–¥–Ω–∏–µ": ["–ë–∏–ª–µ—Ç—ã –≤ –∫–∏–Ω–æ/—Ç–µ–∞—Ç—Ä", "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ –º–∞–≥–∞–∑–∏–Ω", "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ—Å–º–µ—Ç–∏–∫–∞"],
            "–¥–æ—Ä–æ–≥–∏–µ": ["–ì–∞–¥–∂–µ—Ç", "–Æ–≤–µ–ª–∏—Ä–Ω–æ–µ —É–∫—Ä–∞—à–µ–Ω–∏–µ", "–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ"]
        },
        "–Ω–æ–≤—ã–π_–≥–æ–¥": {
            "—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ": ["–Å–ª–æ—á–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏", "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å–≤–∏—Ç–µ—Ä", "–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∞–¥–≤–µ–Ω—Ç"],
            "—É—é—Ç–Ω—ã–µ": ["–¢–µ–ø–ª—ã–π –ø–ª–µ–¥", "–ê—Ä–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–µ—á–∏", "–ù–∞–±–æ—Ä –≥–æ—Ä—è—á–µ–≥–æ —à–æ–∫–æ–ª–∞–¥–∞"]
        },
        "8_–º–∞—Ä—Ç–∞": {
            "—Ü–≤–µ—Ç—ã": ["–ë—É–∫–µ—Ç", "–ö–æ–º–Ω–∞—Ç–Ω–æ–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ –≤ –≥–æ—Ä—à–∫–µ", "–¶–≤–µ—Ç—É—â–∏–π –±–æ–Ω—Å–∞–π"],
            "–∫–æ—Å–º–µ—Ç–∏–∫–∞": ["–ù–∞–±–æ—Ä —É—Ö–æ–¥–æ–≤–æ–π –∫–æ—Å–º–µ—Ç–∏–∫–∏", "–ü–∞—Ä—Ñ—é–º", "–°–ü–ê-–Ω–∞–±–æ—Ä"]
        },
        "23_—Ñ–µ–≤—Ä–∞–ª—è": {
            "–º—É–∂—Å–∫–∏–µ": ["–ù–∞–±–æ—Ä –¥–ª—è –±—Ä–∏—Ç—å—è", "–ü–æ—Ä—Ç–º–æ–Ω–µ", "–§–ª—è–∂–∫–∞"],
            "—Ç–µ—Ö–Ω–∏–∫–∞": ["–ú—É–ª—å—Ç–∏—Ç—É–ª", "Power Bank", "–ù–∞—É—à–Ω–∏–∫–∏"]
        }
    },
    
    "–∏–Ω—Ç–µ—Ä–µ—Å—ã": {
        "—Å–ø–æ—Ä—Ç": ["–§–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–∫–µ—Ä", "–ö—Ä–æ—Å—Å–æ–≤–∫–∏", "–ë—É—Ç—ã–ª–∫–∞ –¥–ª—è –≤–æ–¥—ã", "–°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è —Å—É–º–∫–∞", "–ì–∞–Ω—Ç–µ–ª–∏"],
        "–∫—É–ª–∏–Ω–∞—Ä–∏—è": ["–ù–∞–±–æ—Ä –Ω–æ–∂–µ–π", "–°–∏–ª–∏–∫–æ–Ω–æ–≤—ã–µ —Ñ–æ—Ä–º—ã", "–ö—É–ª–∏–Ω–∞—Ä–Ω–∞—è –∫–Ω–∏–≥–∞", "–°–ø–µ—Ü–∏–∏", "–ë–ª–µ–Ω–¥–µ—Ä"],
        "–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è": ["–î–æ—Ä–æ–∂–Ω–∞—è –ø–æ–¥—É—à–∫–∞", "–í–Ω–µ—à–Ω–∏–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä", "–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—É–º–∫–∞", "–ö–∞—Ä—Ç–∞ –º–∏—Ä–∞"],
        "—á—Ç–µ–Ω–∏–µ": ["–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∫–Ω–∏–≥–∞", "–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–Ω–∏–∂–Ω—ã–π —Å–µ—Ä–≤–∏—Å", "–ó–∞–∫–ª–∞–¥–∫–∏ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã", "–ù–∞—Å—Ç–æ–ª—å–Ω–∞—è –ª–∞–º–ø–∞"],
        "–º—É–∑—ã–∫–∞": ["–ù–∞—É—à–Ω–∏–∫–∏", "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω", "–í–∏–Ω–∏–ª–æ–≤–∞—è –ø–ª–∞—Å—Ç–∏–Ω–∫–∞", "–ü–æ–¥—Å—Ç–∞–≤–∫–∞ –¥–ª—è –≥–∏—Ç–∞—Ä—ã"],
        "–∏–≥—Ä—ã": ["–ò–≥—Ä–æ–≤–∞—è –º—ã—à—å", "–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∞—è", "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Steam", "–ù–∞—Å—Ç–æ–ª—å–Ω–∞—è –∏–≥—Ä–∞"],
        "—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è": ["–®—Ç–∞—Ç–∏–≤", "–§–æ—Ç–æ–∞–ª—å–±–æ–º", "–û–±—ä–µ–∫—Ç–∏–≤", "–í–Ω–µ—à–Ω—è—è –≤—Å–ø—ã—à–∫–∞"],
        "–π–æ–≥–∞": ["–ö–æ–≤—Ä–∏–∫ –¥–ª—è –π–æ–≥–∏", "–ë–ª–æ–∫–∏ –¥–ª—è –π–æ–≥–∏", "–†–µ–º–µ–Ω—å –¥–ª—è –π–æ–≥–∏", "–û–¥–µ–∂–¥–∞ –¥–ª—è –π–æ–≥–∏"],
        "—Ä—ã–±–∞–ª–∫–∞": ["–°–ø–∏–Ω–Ω–∏–Ω–≥", "–ù–∞–±–æ—Ä –±–ª–µ—Å–µ–Ω", "–Ø—â–∏–∫ –¥–ª—è —Ä—ã–±–∞–∫–∞", "–¢–µ—Ä–º–æ—Å"],
        "–∞–≤—Ç–æ–º–æ–±–∏–ª–∏": ["–ê–≤—Ç–æ–∞–∫—Å–µ—Å—Å—É–∞—Ä—ã", "–ê—Ä–æ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä", "–ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤", "–í–∏–¥–µ–æ—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä"],
        "—Ç–∞–Ω—Ü—ã": ["–û–¥–µ–∂–¥–∞ –¥–ª—è —Ç–∞–Ω—Ü–µ–≤", "–°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è —Å—É–º–∫–∞", "–ë—É—Ç—ã–ª–∫–∞ –¥–ª—è –≤–æ–¥—ã", "–ë–∏–ª–µ—Ç –Ω–∞ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å"],
        "—Ä—É–∫–æ–¥–µ–ª–∏–µ": ["–ù–∞–±–æ—Ä –¥–ª—è –≤—ã—à–∏–≤–∞–Ω–∏—è", "–ü—Ä—è–∂–∞", "–°–ø–∏—Ü—ã", "–ü—è–ª—å—Ü—ã"],
        "–∫–æ–º–ø—å—é—Ç–µ—Ä—ã": ["–ò–≥—Ä–æ–≤–∞—è –º—ã—à—å", "–ö–æ–≤—Ä–∏–∫", "–ü–æ–¥—Å—Ç–∞–≤–∫–∞ –ø–æ–¥ –Ω–æ—É—Ç–±—É–∫", "USB-—Ö–∞–±"],
        "–Ω–∞—Å—Ç–æ–ª—å–Ω—ã–µ_–∏–≥—Ä—ã": ["–ö–æ–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä—ã", "–ö–∞—Ä–∫–∞—Å—Å–æ–Ω", "–ë–∏–ª–µ—Ç –Ω–∞ –ø–æ–µ–∑–¥", "–£–Ω–æ"],
        "–∫–∏–Ω–æ": ["–ü–ª–µ–¥", "–ü–æ–ø–∫–æ—Ä–Ω–Ω–∏—Ü–∞", "–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä", "–ü–æ—Å—Ç–µ—Ä"],
        "—Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–æ": ["–ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤", "–°–µ–º–µ–Ω–∞", "–ü–µ—Ä—á–∞—Ç–∫–∏", "–õ–µ–π–∫–∞"],
        "–∂–∏–≤–æ—Ç–Ω—ã–µ": ["–õ–µ–∂–∞–Ω–∫–∞", "–ú–∏—Å–∫–∏", "–ò–≥—Ä—É—à–∫–∏", "–ö–æ—Ä–º –ø—Ä–µ–º–∏—É–º"],
        "–∫—Ä–∞—Å–æ—Ç–∞": ["–ú–∞—Å–∫–∞ –¥–ª—è –ª–∏—Ü–∞", "–ù–∞–±–æ—Ä –∫–∏—Å—Ç–µ–π", "–ü–∞–ª–µ—Ç–∫–∞ —Ç–µ–Ω–µ–π", "–°—ã–≤–æ—Ä–æ—Ç–∫–∞"],
        "–≤–µ–ª–æ—Å–ø–æ—Ä—Ç": ["–í–µ–ª–æ–∫–æ–º–ø—å—é—Ç–µ—Ä", "–§–∞—Ä–∞", "–ó–≤–æ–Ω–æ–∫", "–®–ª–µ–º"],
        "–ø—Å–∏—Ö–æ–ª–æ–≥–∏—è": ["–ö–Ω–∏–≥–∏", "–¢—Ä–µ–Ω–∏–Ω–≥", "–ë–ª–æ–∫–Ω–æ—Ç –¥–ª—è –∑–∞–ø–∏—Å–µ–π", "–ö–∞—Ä—Ç—ã –º–µ—Ç–∞—Ñ–æ—Ä–∏—á–µ—Å–∫–∏–µ"],
        "–∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–µ_—è–∑—ã–∫–∏": ["–ö—É—Ä—Å", "–ö–Ω–∏–≥–∏", "–†–∞–∑–≥–æ–≤–æ—Ä–Ω–∏–∫", "–°–ª–æ–≤–∞—Ä—å"]
    },
    
    "–±—é–¥–∂–µ—Ç": {
        "–¥–æ_1000": ["–ö–Ω–∏–≥–∞", "–ë–ª–æ–∫–Ω–æ—Ç", "–ö—Ä—É–∂–∫–∞", "–°–ª–∞–¥–æ—Å—Ç–∏", "–†–∞—Å—Ç–µ–Ω–∏–µ", "–ù–∞–±–æ—Ä —Ä—É—á–µ–∫", "–ú–∞–≥–Ω–∏—Ç", "–û—Ç–∫—Ä—ã—Ç–∫–∞", "–ß–∞–π", "–ö–æ—Ñ–µ"],
        "1000-3000": ["–§–ª–µ—à–∫–∞", "–í–Ω–µ—à–Ω–∏–π –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä", "–ù–∞–±–æ—Ä –∫–æ—Å–º–µ—Ç–∏–∫–∏", "–ò–≥—Ä—É—à–∫–∞", "–ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∞", "–ù–∞–±–æ—Ä –ø–æ—Å—É–¥—ã", "–¢–µ—Ä–º–æ—Å"],
        "3000-5000": ["–ù–∞—É—à–Ω–∏–∫–∏", "–ö–æ—Å–º–µ—Ç–∏—á–∫–∞", "–ö—É—Ö–æ–Ω–Ω—ã–π –≥–∞–¥–∂–µ—Ç", "–ò–≥—Ä–∞ –Ω–∞—Å—Ç–æ–ª—å–Ω–∞—è", "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç", "–§–∏—Ç–Ω–µ—Å-–±—Ä–∞—Å–ª–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–π"],
        "5000-10000": ["–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –∫–Ω–∏–≥–∞", "–£–º–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞", "–°—É–º–∫–∞", "–û–±—É–≤—å", "–Æ–≤–µ–ª–∏—Ä–Ω–æ–µ —É–∫—Ä–∞—à–µ–Ω–∏–µ", "–§–∏—Ç–Ω–µ—Å-–±—Ä–∞—Å–ª–µ—Ç"],
        "10000-20000": ["–ü–ª–∞–Ω—à–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–π", "–°–º–∞—Ä—Ç—Ñ–æ–Ω –±—é–¥–∂–µ—Ç–Ω—ã–π", "–ß–∞—Å—ã", "–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ", "–ö–æ—Ñ–µ–º–∞—à–∏–Ω–∞", "–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞"],
        "20000+": ["–ù–æ—É—Ç–±—É–∫", "–¢–µ–ª–µ–≤–∏–∑–æ—Ä", "–®—É–±–∞", "–ó–æ–ª–æ—Ç–æ", "–°–º–∞—Ä—Ç—Ñ–æ–Ω —Ñ–ª–∞–≥–º–∞–Ω", "–ê–≤—Ç–æ–º–æ–±–∏–ª—å"]
    },
    
    "—Ç–∏–ø_–ø–æ–¥–∞—Ä–∫–∞": {
        "—ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞": ["–°–º–∞—Ä—Ç—Ñ–æ–Ω", "–ü–ª–∞–Ω—à–µ—Ç", "–ù–æ—É—Ç–±—É–∫", "–ù–∞—É—à–Ω–∏–∫–∏", "–ö–æ–ª–æ–Ω–∫–∞", "–£–º–Ω—ã–µ —á–∞—Å—ã"],
        "–æ–¥–µ–∂–¥–∞": ["–¢–æ–ª—Å—Ç–æ–≤–∫–∞", "–§—É—Ç–±–æ–ª–∫–∞", "–î–∂–∏–Ω—Å—ã", "–ö—É—Ä—Ç–∫–∞", "–ü–ª–∞—Ç—å–µ", "–ö–æ—Å—Ç—é–º"],
        "–∞–∫—Å–µ—Å—Å—É–∞—Ä—ã": ["–°—É–º–∫–∞", "–†–µ–º–µ–Ω—å", "–ß–∞—Å—ã", "–®–∞—Ä—Ñ", "–ü–µ—Ä—á–∞—Ç–∫–∏", "–ö–æ—à–µ–ª–µ–∫"],
        "–∫–æ—Å–º–µ—Ç–∏–∫–∞": ["–î—É—Ö–∏", "–ö—Ä–µ–º", "–ü–æ–º–∞–¥–∞", "–¢—É—à—å", "–ù–∞–±–æ—Ä", "–ü–∞—Ä—Ñ—é–º"],
        "—Å–ø–æ—Ä—Ç": ["–ú—è—á", "–§–æ—Ä–º–∞", "–ö—Ä–æ—Å—Å–æ–≤–∫–∏", "–ì–∞–Ω—Ç–µ–ª–∏", "–ö–æ–≤—Ä–∏–∫", "–¢—Ä–µ–Ω–∞–∂–µ—Ä"],
        "—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ": ["–ö—Ä–∞—Å–∫–∏", "–ö–∏—Å—Ç–∏", "–•–æ–ª—Å—Ç", "–ü–ª–∞—Å—Ç–∏–ª–∏–Ω", "–ù–∞–±–æ—Ä", "–ú–æ–ª—å–±–µ—Ä—Ç"],
        "—Å—É–≤–µ–Ω–∏—Ä—ã": ["–ú–∞–≥–Ω–∏—Ç", "–°—Ç–∞—Ç—É—ç—Ç–∫–∞", "–¢–∞—Ä–µ–ª–∫–∞", "–ö—Ä—É–∂–∫–∞", "–ë—Ä–µ–ª–æ–∫", "–§–æ—Ç–æ—Ä–∞–º–∫–∞"],
        "–∫–Ω–∏–≥–∏": ["–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è", "–ù–∞—É—á–Ω–∞—è", "–î–µ—Ç—Å–∫–∞—è", "–ö—É–ª–∏–Ω–∞—Ä–Ω–∞—è", "–≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è", "–ü–æ–¥–∞—Ä–æ—á–Ω–æ–µ –∏–∑–¥–∞–Ω–∏–µ"],
        "–∏–≥—Ä—É—à–∫–∏": ["–ú—è–≥–∫–∏–µ", "–†–∞–∑–≤–∏–≤–∞—é—â–∏–µ", "–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä", "–ö—É–∫–ª–∞", "–ú–∞—à–∏–Ω–∫–∞", "–ù–∞—Å—Ç–æ–ª—å–Ω–∞—è –∏–≥—Ä–∞"],
        "–ø–æ–¥–∞—Ä–æ—á–Ω—ã–µ_–∫–∞—Ä—Ç—ã": ["Ozon", "Wildberries", "–Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç", "–õ'–≠—Ç—É–∞–ª—å", "–°–ø–æ—Ä—Ç–º–∞—Å—Ç–µ—Ä", "–î–µ—Ç—Å–∫–∏–π –º–∏—Ä"]
    },
    
    "–ø–æ–ª—É—á–∞—Ç–µ–ª—å": {
        "–ø–∞—Ä–Ω—é": ["–ù–∞—É—à–Ω–∏–∫–∏", "–°—Ç–∏–ª—å–Ω–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞", "–ü–∞—Ä—Ñ—é–º", "–ò–≥—Ä–æ–≤–∞—è –º—ã—à—å", "Power Bank", "–ö—Ä–æ—Å—Å–æ–≤–∫–∏"],
        "–¥–µ–≤—É—à–∫–µ": ["–¶–≤–µ—Ç—ã", "–î—É—Ö–∏", "–£–∫—Ä–∞—à–µ–Ω–∏—è", "–ö–æ—Å–º–µ—Ç–∏–∫–∞", "–°—É–º–∫–∞", "–ü–ª–µ–¥"],
        "–º—É–∂—É": ["–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã", "–ì–∞–¥–∂–µ—Ç—ã", "–ü–∞—Ä—Ñ—é–º", "–†–µ–º–µ–Ω—å", "–ö–æ—à–µ–ª–µ–∫", "–ù–∞–±–æ—Ä –¥–ª—è –∞–≤—Ç–æ"],
        "–∂–µ–Ω–µ": ["–¶–≤–µ—Ç—ã", "–£–∫—Ä–∞—à–µ–Ω–∏—è", "–ö–æ—Å–º–µ—Ç–∏–∫–∞", "–°–ü–ê-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç", "–ü–ª–∞—Ç—å–µ", "–ë—ã—Ç–æ–≤–∞—è —Ç–µ—Ö–Ω–∏–∫–∞"],
        "–ø–∞–ø–µ": ["–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç", "–ù–∞–±–æ—Ä –¥–ª—è –∞–≤—Ç–æ", "–ö–Ω–∏–≥–∞", "–†—ã–±–æ–ª–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏", "–ü–∞—Ä—Ñ—é–º", "–¢–µ—Ä–º–æ—Å"],
        "–º–∞–º–µ": ["–¶–≤–µ—Ç—ã", "–ö–æ—Å–º–µ—Ç–∏–∫–∞", "–ü–æ—Å—É–¥–∞", "–£–∫—Ä–∞—à–µ–Ω–∏–µ", "–°–ü–ê-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç", "–§–æ—Ç–æ–∞–ª—å–±–æ–º"],
        "–∫–æ–ª–ª–µ–≥–µ": ["–ö—Ä—É–∂–∫–∞", "–ë–ª–æ–∫–Ω–æ—Ç", "–ö–∞–Ω—Ü–µ–ª—è—Ä–∏—è", "–°–ª–∞–¥–æ—Å—Ç–∏", "–°—É–≤–µ–Ω–∏—Ä", "–ù–∞–±–æ—Ä —á–∞—è"],
        "–Ω–∞—á–∞–ª—å–Ω–∏–∫—É": ["–≠–ª–∏—Ç–Ω—ã–π –∞–ª–∫–æ–≥–æ–ª—å", "–î–æ—Ä–æ–≥–æ–π –ø–∞—Ä—Ñ—é–º", "–ö–∞–Ω—Ü–µ–ª—è—Ä–∏—è –ø—Ä–µ–º–∏—É–º", "–ü–æ–¥–∞—Ä–æ—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç", "–ß–∞—Å—ã"],
        "–ø–æ–¥—Ä—É–≥–µ": ["–ö–æ—Å–º–µ—Ç–∏–∫–∞", "–£–∫—Ä–∞—à–µ–Ω–∏—è", "–°–ª–∞–¥–æ—Å—Ç–∏", "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã", "–í–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è", "–ö–Ω–∏–≥–∞"],
        "–¥—Ä—É–≥—É": ["–ì–∞–¥–∂–µ—Ç—ã", "–ù–∞—Å—Ç–æ–ª—å–Ω–∞—è –∏–≥—Ä–∞", "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã", "–ë–∏–ª–µ—Ç—ã", "–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã", "–§—É—Ç–±–æ–ª–∫–∞"],
        "–¥–µ–¥—É—à–∫–µ": ["–ö–Ω–∏–≥–∞", "–ù–∞–±–æ—Ä –¥–ª—è —Ä—ã–±–∞–ª–∫–∏", "–¢–µ—Ä–º–æ—Å", "–ü–ª–µ–¥", "–®–∞—Ö–º–∞—Ç—ã", "–ß–∞—Å—ã"],
        "–±–∞–±—É—à–∫–µ": ["–ù–∞–±–æ—Ä –¥–ª—è –≤—è–∑–∞–Ω–∏—è", "–ö–Ω–∏–≥–∞", "–†–∞—Å—Ç–µ–Ω–∏–µ", "–ü–ª–µ–¥", "–ü–æ—Å—É–¥–∞", "–§–æ—Ç–æ–∞–ª—å–±–æ–º"],
        "—Å—ã–Ω—É": ["–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä", "–ú–∞—à–∏–Ω–∫–∞", "–ì–∞–¥–∂–µ—Ç", "–°–ø–æ—Ä—Ç–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å", "–ö–Ω–∏–≥–∞", "–ù–∞—Å—Ç–æ–ª—å–Ω–∞—è –∏–≥—Ä–∞"],
        "–¥–æ—á–∫–µ": ["–ö—É–∫–ª–∞", "–£–∫—Ä–∞—à–µ–Ω–∏—è", "–ö–æ—Å–º–µ—Ç–∏–∫–∞", "–ú—è–≥–∫–∞—è –∏–≥—Ä—É—à–∫–∞", "–ù–∞–±–æ—Ä –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞", "–ü–ª–∞—Ç—å–µ"]
    },
    
    "—Å–µ–∑–æ–Ω–Ω—ã–µ": {
        "–∑–∏–º–∞": ["–í–∞—Ä–µ–∂–∫–∏", "–®–∞—Ä—Ñ", "–®–∞–ø–∫–∞", "–¢–µ—Ä–º–æ—Å", "–ì–ª–∏–Ω—Ç–≤–µ–π–Ω –Ω–∞–±–æ—Ä", "–°–∞–Ω–∫–∏", "–ö–æ–Ω—å–∫–∏"],
        "–≤–µ—Å–Ω–∞": ["–ó–æ–Ω—Ç", "–õ–µ–≥–∫–∏–π —à–∞—Ä—Ñ", "–°–µ–º–µ–Ω–∞", "–°–∞–¥–æ–≤—ã–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å", "–ö—Ä–µ–º –æ—Ç —Å–æ–ª–Ω—Ü–∞", "–†–µ–∑–∏–Ω–æ–≤—ã–µ —Å–∞–ø–æ–≥–∏"],
        "–ª–µ—Ç–æ": ["–ü–ª—è–∂–Ω–∞—è —Å—É–º–∫–∞", "–ö—É–ø–∞–ª—å–Ω–∏–∫", "–°–ª–∞–Ω—Ü—ã", "–ü–æ–ª–æ—Ç–µ–Ω—Ü–µ", "–°–æ–ª–Ω—Ü–µ–∑–∞—â–∏—Ç–Ω—ã–µ –æ—á–∫–∏", "–ù–∞–¥—É–≤–Ω–æ–π –∫—Ä—É–≥"],
        "–æ—Å–µ–Ω—å": ["–î–æ–∂–¥–µ–≤–∏–∫", "–¢–µ—Ä–º–æ–∫—Ä—É–∂–∫–∞", "–ü–ª–µ–¥", "–ß–∞–π–Ω—ã–π –Ω–∞–±–æ—Ä", "–ó–æ–Ω—Ç", "–£—é—Ç–Ω—ã–µ –Ω–æ—Å–∫–∏"]
    },
    
    "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": {
        "—Ö–∏—Ç—ã": ["LEGO", "–ê–π—Ñ–æ–Ω", "–≠–ª–µ–∫—Ç—Ä–æ—Å–∞–º–æ–∫–∞—Ç", "–£–º–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞", "–§–∏—Ç–Ω–µ—Å-–±—Ä–∞—Å–ª–µ—Ç", "–ü–æ–¥–∞—Ä–æ—á–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç"],
        "—Ç—Ä–µ–Ω–¥—ã": ["–°–º–∞—Ä—Ç-—á–∞—Å—ã", "–ü–æ–≤–µ—Ä–±–∞–Ω–∫ —Å –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π –∑–∞—Ä—è–¥–∫–æ–π", "3D-—Ä—É—á–∫–∞", "–ö–≤–∞–¥—Ä–æ–∫–æ–ø—Ç–µ—Ä", "–ú–∞—Å—Å–∞–∂–Ω–æ–µ –∫—Ä–µ—Å–ª–æ"],
        "–±–µ—Å—Ç—Å–µ–ª–ª–µ—Ä—ã": ["–ù–∞—É—à–Ω–∏–∫–∏ AirPods", "–ö–∏–Ω–¥–µ—Ä-—Å—é—Ä–ø—Ä–∏–∑", "–ú–æ–Ω–æ–ø–æ–ª–∏—è", "–ù–∞–±–æ—Ä –¥–ª—è –æ–ø—ã—Ç–æ–≤", "–ì–ª–æ–±—É—Å"]
    }
}

class OpenAIGiftAdvisor:
    """–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OpenAI (DeepSeek) API –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –ø–æ–¥–∞—Ä–∫–æ–≤"""
    
    def __init__(self, client):
        self.client = client
    
    def get_gift_recommendations(self, query_text, user_id=None):
        """–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –æ—Ç OpenAI"""
        try:
            # –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç –¥–ª—è OpenAI
            prompt = f"""–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–¥–±–æ—Ä—É –ø–æ–¥–∞—Ä–∫–æ–≤. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø—Ä–µ–¥–ª–æ–∂–∏ 5 –ª—É—á—à–∏—Ö –∏–¥–µ–π –ø–æ–¥–∞—Ä–∫–æ–≤.

–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "{query_text}"

–¢–≤–æ–π –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
{{
    "analysis": {{
        "–≤–æ–∑—Ä–∞—Å—Ç": "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –∏–ª–∏ '–Ω–µ —É–∫–∞–∑–∞–Ω'",
        "–ø–æ–ª": "–º—É–∂—Å–∫–æ–π/–∂–µ–Ω—Å–∫–∏–π/–Ω–µ —É–∫–∞–∑–∞–Ω",
        "–ø–æ–≤–æ–¥": "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ–≤–æ–¥ –∏–ª–∏ '–Ω–µ —É–∫–∞–∑–∞–Ω'",
        "–±—é–¥–∂–µ—Ç": "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç –∏–ª–∏ '–Ω–µ —É–∫–∞–∑–∞–Ω'",
        "–∏–Ω—Ç–µ—Ä–µ—Å—ã": ["—Å–ø–∏—Å–æ–∫", "–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤"]
    }},
    "recommendations": [
        {{
            "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞",
            "—Ü–µ–Ω–∞": "–ø—Ä–∏–º–µ—Ä–Ω–∞—è —Ü–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö",
            "–æ–ø–∏—Å–∞–Ω–∏–µ": "–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
            "–ø–æ—á–µ–º—É_–ø–æ–¥—Ö–æ–¥–∏—Ç": "–ø–æ—á–µ–º—É —ç—Ç–æ—Ç –ø–æ–¥–∞—Ä–æ–∫ —Ö–æ—Ä–æ—à –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Å–ª—É—á–∞—è",
            "–≥–¥–µ_–∫—É–ø–∏—Ç—å": ["–º–∞–≥–∞–∑–∏–Ω 1", "–º–∞–≥–∞–∑–∏–Ω 2"]
        }},
        ... –µ—â–µ 4 –ø–æ–¥–∞—Ä–∫–∞
    ],
    "advice": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç –ø–æ –≤—ã–±–æ—Ä—É –ø–æ–¥–∞—Ä–∫–∞"
}}

–í–∞–∂–Ω–æ: 
- –ü—Ä–µ–¥–ª–∞–≥–∞–π —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ, –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏
- –£—á–∏—Ç—ã–≤–∞–π –±—é–¥–∂–µ—Ç –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
- –ü–æ–¥–±–∏—Ä–∞–π –ø–æ–¥–∞—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –≤–æ–∑—Ä–∞—Å—Ç—É –∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º
- –ë—É–¥—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö
- –û—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
"""

            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ OpenAI API
            response = self.client.chat.completions.create(
                model="gpt-3.5-turbo",
                messages=[
                    {"role": "system", "content": "–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ –ø–æ–¥–±–æ—Ä—É –ø–æ–¥–∞—Ä–∫–æ–≤. –û—Ç–≤–µ—á–∞–π –≤—Å–µ–≥–¥–∞ —Ç–æ–ª—å–∫–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON."},
                    {"role": "user", "content": prompt}
                ],
                temperature=0.7,
                max_tokens=2000
            )
            
            content = response.choices[0].message.content
            
            # –ò–∑–≤–ª–µ–∫–∞–µ–º JSON –∏–∑ –æ—Ç–≤–µ—Ç–∞
            try:
                # –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ JSON –≤ –æ—Ç–≤–µ—Ç–µ
                json_start = content.find('{')
                json_end = content.rfind('}') + 1
                if json_start != -1 and json_end != 0:
                    json_str = content[json_start:json_end]
                    recommendations = json.loads(json_str)
                    return recommendations
                else:
                    # –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ JSON, –ø—ã—Ç–∞–µ–º—Å—è —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤–µ—Å—å –æ—Ç–≤–µ—Ç
                    return json.loads(content)
            except json.JSONDecodeError as e:
                logger.error(f"–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON: {e}")
                logger.error(f"–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–≤–µ—Ç–∞: {content}")
                return None
                
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ OpenAI API: {e}")
            return None
    
    def enhance_gift_description(self, gift_name, context=""):
        """–£–ª—É—á—à–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞ —Å –ø–æ–º–æ—â—å—é OpenAI"""
        try:
            prompt = f"""–û–ø–∏—à–∏ –ø–æ–¥–∞—Ä–æ–∫ "{gift_name}" –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: {context}
            
–î–∞–π –∫—Ä–∞—Ç–∫–æ–µ, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è), –ø–æ—á–µ–º—É —ç—Ç–æ —Ö–æ—Ä–æ—à–∏–π –ø–æ–¥–∞—Ä–æ–∫."""

            response = self.client.chat.completions.create(
                model="gpt-3.5-turbo",
                messages=[
                    {"role": "system", "content": "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–¥–∞—Ä–∫–∞–º. –î–∞–≤–∞–π –∫—Ä–∞—Ç–∫–∏–µ, –ø–æ–ª–µ–∑–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è."},
                    {"role": "user", "content": prompt}
                ],
                temperature=0.5,
                max_tokens=150
            )
            
            return response.choices[0].message.content
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è: {e}")
            return None
    
    def get_creative_ideas(self, query):
        """–ü–æ–ª—É—á–∏—Ç—å –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –∏–¥–µ–∏ –ø–æ–¥–∞—Ä–∫–æ–≤"""
        try:
            prompt = f"""–ü—Ä–µ–¥–ª–æ–∂–∏ 5 –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö, –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏–¥–µ–π –ø–æ–¥–∞—Ä–∫–æ–≤ –¥–ª—è: {query}

–û—Ç–≤–µ—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:
{{
    "ideas": [
        {{
            "–Ω–∞–∑–≤–∞–Ω–∏–µ": "–ù–∞–∑–≤–∞–Ω–∏–µ",
            "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ü–æ—á–µ–º—É —ç—Ç–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ",
            "—Ü–µ–Ω–∞": "–ø—Ä–∏–º–µ—Ä–Ω–∞—è —Ü–µ–Ω–∞"
        }}
    ]
}}"""

            response = self.client.chat.completions.create(
                model="gpt-3.5-turbo",
                messages=[
                    {"role": "system", "content": "–¢—ã –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–¥–∞—Ä–∫–∞–º. –û—Ç–≤–µ—á–∞–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON."},
                    {"role": "user", "content": prompt}
                ],
                temperature=0.8,
                max_tokens=1000
            )
            
            content = response.choices[0].message.content
            return json.loads(content)
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –∏–¥–µ–π: {e}")
            return None

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OpenAI –ø–æ–º–æ—â–Ω–∏–∫–∞
openai_advisor = OpenAIGiftAdvisor(client)

class GiftAssistant:
    def __init__(self):
        self.user_preferences = {}
        self.gift_history = {}
        self.search_filters = {}
        self.user_sessions = {}
        self.favorites = {}
        
    def create_main_menu(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é"""
        markup = types.InlineKeyboardMarkup(row_width=2)
        
        buttons = [
            ("üéÅ –ü–û–î–û–ë–†–ê–¢–¨ –ü–û–î–ê–†–û–ö", "menu_gift"),
            ("ü§ñ OPENAI –ü–û–î–ë–û–†", "menu_openai"),
            ("üë§ –ü–û –ü–û–õ–£–ß–ê–¢–ï–õ–Æ", "menu_recipient"),
            ("üí∞ –ü–û –¶–ï–ù–ï", "menu_price"),
            ("üéØ –ü–û –ò–ù–¢–ï–†–ï–°–ê–ú", "menu_interests"),
            ("üë∂ –ü–û –í–û–ó–†–ê–°–¢–£", "menu_age"),
            ("üéâ –ü–û –ü–û–í–û–î–£", "menu_occasion"),
            ("üìÖ –ü–û –°–ï–ó–û–ù–£", "menu_season"),
            ("üèÜ –ü–û–ü–£–õ–Ø–†–ù–´–ï", "menu_popular"),
            ("üìã –¢–ò–ü –ü–û–î–ê–†–ö–ê", "menu_type"),
            ("‚ù§Ô∏è –ò–ó–ë–†–ê–ù–ù–û–ï", "menu_favorites"),
            ("üìä –ò–°–¢–û–†–ò–Ø", "menu_history"),
            ("‚ùì –ü–û–ú–û–©–¨", "menu_help")
        ]
        
        for text, callback in buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        return markup
    
    def create_openai_menu(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é OpenAI"""
        markup = types.InlineKeyboardMarkup(row_width=1)
        
        buttons = [
            ("üéØ –£–ú–ù–´–ô –ü–û–î–ë–û–† –ü–û–î–ê–†–ö–ê", "openai_gift"),
            ("üí° –ò–î–ï–ò –ü–û –ò–ù–¢–ï–†–ï–°–ê–ú", "openai_interests"),
            ("üé® –ö–†–ï–ê–¢–ò–í–ù–´–ï –ò–î–ï–ò", "openai_creative"),
            ("üìù –û–ü–ò–°–ê–¢–¨ –°–í–û–ô –ó–ê–ü–†–û–°", "openai_custom"),
            ("üîô –ù–ê–ó–ê–î", "menu_main")
        ]
        
        for text, callback in buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        return markup
    
    def create_back_button(self, callback_data="menu_main"):
        """–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥"""
        markup = types.InlineKeyboardMarkup()
        back_btn = types.InlineKeyboardButton("üîô –ù–ê–ó–ê–î –í –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ", callback_data=callback_data)
        markup.add(back_btn)
        return markup
    
    def create_price_menu(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Ü–µ–Ω—ã"""
        markup = types.InlineKeyboardMarkup(row_width=2)
        
        price_buttons = [
            ("üíµ –î–û 1000 –†–£–ë", "price_–¥–æ_1000"),
            ("üí∏ 1000-3000 –†–£–ë", "price_1000-3000"),
            ("üí∞ 3000-5000 –†–£–ë", "price_3000-5000"),
            ("üíé 5000-10000 –†–£–ë", "price_5000-10000"),
            ("üëë 10000-20000 –†–£–ë", "price_10000-20000"),
            ("üí´ –ë–û–õ–ï–ï 20000 –†–£–ë", "price_20000+")
        ]
        
        for text, callback in price_buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        markup.add(types.InlineKeyboardButton("üîô –ù–ê–ó–ê–î", callback_data="menu_main"))
        return markup
    
    def create_recipient_menu(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è"""
        markup = types.InlineKeyboardMarkup(row_width=3)
        
        recipient_buttons = [
            ("üë® –ü–ê–†–ù–Æ", "recipient_–ø–∞—Ä–Ω—é"),
            ("üë© –î–ï–í–£–®–ö–ï", "recipient_–¥–µ–≤—É—à–∫–µ"),
            ("üë®‚Äçü¶∞ –ú–£–ñ–£", "recipient_–º—É–∂—É"),
            ("üë©‚Äçü¶∞ –ñ–ï–ù–ï", "recipient_–∂–µ–Ω–µ"),
            ("üë®‚Äçüëß –ü–ê–ü–ï", "recipient_–ø–∞–ø–µ"),
            ("üë©‚Äçüëß –ú–ê–ú–ï", "recipient_–º–∞–º–µ"),
            ("üëî –ö–û–õ–õ–ï–ì–ï", "recipient_–∫–æ–ª–ª–µ–≥–µ"),
            ("üëë –ù–ê–ß–ê–õ–¨–ù–ò–ö–£", "recipient_–Ω–∞—á–∞–ª—å–Ω–∏–∫—É"),
            ("üëØ‚Äç‚ôÄÔ∏è –ü–û–î–†–£–ì–ï", "recipient_–ø–æ–¥—Ä—É–≥–µ"),
            ("üëØ –î–†–£–ì–£", "recipient_–¥—Ä—É–≥—É"),
            ("üë¥ –î–ï–î–£–®–ö–ï", "recipient_–¥–µ–¥—É—à–∫–µ"),
            ("üëµ –ë–ê–ë–£–®–ö–ï", "recipient_–±–∞–±—É—à–∫–µ"),
            ("üßí –°–´–ù–£", "recipient_—Å—ã–Ω—É"),
            ("üëß –î–û–ß–ö–ï", "recipient_–¥–æ—á–∫–µ")
        ]
        
        for text, callback in recipient_buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        markup.add(types.InlineKeyboardButton("üîô –ù–ê–ó–ê–î", callback_data="menu_main"))
        return markup
    
    def create_interest_menu(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤"""
        markup = types.InlineKeyboardMarkup(row_width=2)
        
        interest_buttons = [
            ("‚öΩ –°–ü–û–†–¢", "interest_—Å–ø–æ—Ä—Ç"),
            ("üç≥ –ö–£–õ–ò–ù–ê–†–ò–Ø", "interest_–∫—É–ª–∏–Ω–∞—Ä–∏—è"),
            ("‚úàÔ∏è –ü–£–¢–ï–®–ï–°–¢–í–ò–Ø", "interest_–ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è"),
            ("üìö –ß–¢–ï–ù–ò–ï", "interest_—á—Ç–µ–Ω–∏–µ"),
            ("üéµ –ú–£–ó–´–ö–ê", "interest_–º—É–∑—ã–∫–∞"),
            ("üéÆ –ò–ì–†–´", "interest_–∏–≥—Ä—ã"),
            ("üì∑ –§–û–¢–û–ì–†–ê–§–ò–Ø", "interest_—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è"),
            ("üßò –ô–û–ì–ê", "interest_–π–æ–≥–∞"),
            ("üé£ –†–´–ë–ê–õ–ö–ê", "interest_—Ä—ã–±–∞–ª–∫–∞"),
            ("üöó –ê–í–¢–û–ú–û–ë–ò–õ–ò", "interest_–∞–≤—Ç–æ–º–æ–±–∏–ª–∏"),
            ("üíÉ –¢–ê–ù–¶–´", "interest_—Ç–∞–Ω—Ü—ã"),
            ("üß∂ –†–£–ö–û–î–ï–õ–ò–ï", "interest_—Ä—É–∫–æ–¥–µ–ª–∏–µ"),
            ("üíª –ö–û–ú–ü–¨–Æ–¢–ï–†–´", "interest_–∫–æ–º–ø—å—é—Ç–µ—Ä—ã"),
            ("üé≤ –ù–ê–°–¢–û–õ–ö–ò", "interest_–Ω–∞—Å—Ç–æ–ª—å–Ω—ã–µ_–∏–≥—Ä—ã"),
            ("üé¨ –ö–ò–ù–û", "interest_–∫–∏–Ω–æ"),
            ("üå± –°–ê–î–û–í–û–î–°–¢–í–û", "interest_—Å–∞–¥–æ–≤–æ–¥—Å—Ç–≤–æ"),
            ("üê± –ñ–ò–í–û–¢–ù–´–ï", "interest_–∂–∏–≤–æ—Ç–Ω—ã–µ"),
            ("üíÑ –ö–†–ê–°–û–¢–ê", "interest_–∫—Ä–∞—Å–æ—Ç–∞")
        ]
        
        for text, callback in interest_buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        markup.add(types.InlineKeyboardButton("üîô –ù–ê–ó–ê–î", callback_data="menu_main"))
        return markup
    
    def create_age_menu(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞"""
        markup = types.InlineKeyboardMarkup(row_width=2)
        
        age_buttons = [
            ("üë∂ 0-3 –ì–û–î–ê", "age_0-3"),
            ("üßí 4-6 –õ–ï–¢", "age_4-6"),
            ("üë¶ 7-12 –õ–ï–¢", "age_7-12"),
            ("üßë 13-17 –õ–ï–¢", "age_13-17"),
            ("üë® 18-25 –õ–ï–¢", "age_18-25"),
            ("üë®‚Äçü¶∞ 26-40 –õ–ï–¢", "age_26-40"),
            ("üë¥ 40+ –õ–ï–¢", "age_40+")
        ]
        
        for text, callback in age_buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        markup.add(types.InlineKeyboardButton("üîô –ù–ê–ó–ê–î", callback_data="menu_main"))
        return markup
    
    def create_occasion_menu(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –ø–æ–≤–æ–¥–∞"""
        markup = types.InlineKeyboardMarkup(row_width=2)
        
        occasion_buttons = [
            ("üéÇ –î–ï–ù–¨ –†–û–ñ–î–ï–ù–ò–Ø", "occasion_–¥–µ–Ω—å_—Ä–æ–∂–¥–µ–Ω–∏—è"),
            ("üéÑ –ù–û–í–´–ô –ì–û–î", "occasion_–Ω–æ–≤—ã–π_–≥–æ–¥"),
            ("üå∏ 8 –ú–ê–†–¢–ê", "occasion_8_–º–∞—Ä—Ç–∞"),
            ("üí™ 23 –§–ï–í–†–ê–õ–Ø", "occasion_23_—Ñ–µ–≤—Ä–∞–ª—è"),
            ("üíç –°–í–ê–î–¨–ë–ê", "occasion_—Å–≤–∞–¥—å–±–∞"),
            ("üíï –î–ï–ù–¨ –í–õ–Æ–ë–õ–ï–ù–ù–´–•", "occasion_–¥–µ–Ω—å_—Å–≤—è—Ç–æ–≥–æ_–≤–∞–ª–µ–Ω—Ç–∏–Ω–∞"),
            ("üéâ –Æ–ë–ò–õ–ï–ô", "occasion_—é–±–∏–ª–µ–π"),
            ("üéÅ –ë–ï–ó –ü–û–í–û–î–ê", "occasion_–±–µ–∑_–ø–æ–≤–æ–¥–∞")
        ]
        
        for text, callback in occasion_buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        markup.add(types.InlineKeyboardButton("üîô –ù–ê–ó–ê–î", callback_data="menu_main"))
        return markup
    
    def create_season_menu(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Å–µ–∑–æ–Ω–∞"""
        markup = types.InlineKeyboardMarkup(row_width=2)
        
        season_buttons = [
            ("‚ùÑÔ∏è –ó–ò–ú–ê", "season_–∑–∏–º–∞"),
            ("üå∏ –í–ï–°–ù–ê", "season_–≤–µ—Å–Ω–∞"),
            ("‚òÄÔ∏è –õ–ï–¢–û", "season_–ª–µ—Ç–æ"),
            ("üçÇ –û–°–ï–ù–¨", "season_–æ—Å–µ–Ω—å")
        ]
        
        for text, callback in season_buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        markup.add(types.InlineKeyboardButton("üîô –ù–ê–ó–ê–î", callback_data="menu_main"))
        return markup
    
    def create_type_menu(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –ø–æ–¥–∞—Ä–∫–∞"""
        markup = types.InlineKeyboardMarkup(row_width=2)
        
        type_buttons = [
            ("üì± –≠–õ–ï–ö–¢–†–û–ù–ò–ö–ê", "type_—ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞"),
            ("üëï –û–î–ï–ñ–î–ê", "type_–æ–¥–µ–∂–¥–∞"),
            ("üëú –ê–ö–°–ï–°–°–£–ê–†–´", "type_–∞–∫—Å–µ—Å—Å—É–∞—Ä—ã"),
            ("üíÑ –ö–û–°–ú–ï–¢–ò–ö–ê", "type_–∫–æ—Å–º–µ—Ç–∏–∫–∞"),
            ("‚öΩ –°–ü–û–†–¢", "type_—Å–ø–æ—Ä—Ç"),
            ("üé® –¢–í–û–†–ß–ï–°–¢–í–û", "type_—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ"),
            ("üéÅ –°–£–í–ï–ù–ò–†–´", "type_—Å—É–≤–µ–Ω–∏—Ä—ã"),
            ("üìö –ö–ù–ò–ì–ò", "type_–∫–Ω–∏–≥–∏"),
            ("üß∏ –ò–ì–†–£–®–ö–ò", "type_–∏–≥—Ä—É—à–∫–∏"),
            ("üí≥ –ü–û–î–ê–†–û–ß–ù–´–ï –ö–ê–†–¢–´", "type_–ø–æ–¥–∞—Ä–æ—á–Ω—ã–µ_–∫–∞—Ä—Ç—ã")
        ]
        
        for text, callback in type_buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        markup.add(types.InlineKeyboardButton("üîô –ù–ê–ó–ê–î", callback_data="menu_main"))
        return markup
    
    def create_popularity_menu(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω—é –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏"""
        markup = types.InlineKeyboardMarkup(row_width=1)
        
        popularity_buttons = [
            ("üî• –•–ò–¢–´ –ü–†–û–î–ê–ñ", "popular_—Ö–∏—Ç—ã"),
            ("üìà –¢–†–ï–ù–î–´ –°–ï–ó–û–ù–ê", "popular_—Ç—Ä–µ–Ω–¥—ã"),
            ("üèÜ –ë–ï–°–¢–°–ï–õ–õ–ï–†–´", "popular_–±–µ—Å—Ç—Å–µ–ª–ª–µ—Ä—ã"),
            ("‚≠ê –í–´–°–û–ö–ò–ô –†–ï–ô–¢–ò–ù–ì", "popular_rating")
        ]
        
        for text, callback in popularity_buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        markup.add(types.InlineKeyboardButton("üîô –ù–ê–ó–ê–î", callback_data="menu_main"))
        return markup
    
    def create_gift_action_buttons(self, gift_name):
        """–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –ø–æ–¥–∞—Ä–∫–∞"""
        markup = types.InlineKeyboardMarkup(row_width=2)
        
        buttons = [
            ("‚ù§Ô∏è –í –ò–ó–ë–†–ê–ù–ù–û–ï", f"fav_{gift_name}"),
            ("üõí –ì–î–ï –ö–£–ü–ò–¢–¨", f"buy_{gift_name}"),
            ("üîÑ –ü–û–•–û–ñ–ò–ï", f"similar_{gift_name}"),
            ("üìù –û–¢–ó–´–í–´", f"reviews_{gift_name}"),
            ("‚≠ê –ü–û–î–†–û–ë–ù–ï–ï", f"details_{gift_name}"),
            ("üì§ –ü–û–î–ï–õ–ò–¢–¨–°–Ø", f"share_{gift_name}"),
            ("ü§ñ –£–õ–£–ß–®–ò–¢–¨ –û–ü–ò–°–ê–ù–ò–ï", f"enhance_{gift_name}")
        ]
        
        for text, callback in buttons:
            btn = types.InlineKeyboardButton(text, callback_data=callback)
            markup.add(btn)
            
        return markup
    
    def find_gifts_by_price(self, price_range):
        """–ü–æ–∏—Å–∫ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ —Ü–µ–Ω–µ"""
        gifts = []
        
        if price_range in GIFT_DATABASE["–±—é–¥–∂–µ—Ç"]:
            for gift_name in GIFT_DATABASE["–±—é–¥–∂–µ—Ç"][price_range]:
                gift = self._create_gift_object(gift_name, price_range)
                if gift:
                    gift["—Ü–µ–Ω–∞"] = price_range
                    gifts.append(gift)
        
        return gifts[:12]
    
    def find_gifts_by_recipient(self, recipient):
        """–ü–æ–∏—Å–∫ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—é"""
        gifts = []
        
        if recipient in GIFT_DATABASE["–ø–æ–ª—É—á–∞—Ç–µ–ª—å"]:
            for gift_name in GIFT_DATABASE["–ø–æ–ª—É—á–∞—Ç–µ–ª—å"][recipient]:
                gift = self._create_gift_object(gift_name, recipient)
                if gift:
                    gift["–ø–æ–ª—É—á–∞—Ç–µ–ª—å"] = recipient
                    gifts.append(gift)
        
        return gifts[:12]
    
    def find_gifts_by_interest(self, interest):
        """–ü–æ–∏—Å–∫ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º"""
        gifts = []
        
        if interest in GIFT_DATABASE["–∏–Ω—Ç–µ—Ä–µ—Å—ã"]:
            for gift_name in GIFT_DATABASE["–∏–Ω—Ç–µ—Ä–µ—Å—ã"][interest]:
                gift = self._create_gift_object(gift_name, interest)
                if gift:
                    gift["–∏–Ω—Ç–µ—Ä–µ—Å"] = interest
                    gifts.append(gift)
        
        return gifts[:12]
    
    def find_gifts_by_age(self, age_range):
        """–ü–æ–∏—Å–∫ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É"""
        gifts = []
        
        if age_range in GIFT_DATABASE["–≤–æ–∑—Ä–∞—Å—Ç"]:
            age_data = GIFT_DATABASE["–≤–æ–∑—Ä–∞—Å—Ç"][age_range]
            for category_gifts in age_data["–∫–∞—Ç–µ–≥–æ—Ä–∏–∏"].values():
                for gift in category_gifts[:3]:
                    gifts.append(gift)
        
        return gifts[:12]
    
    def find_gifts_by_occasion(self, occasion):
        """–ü–æ–∏—Å–∫ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ –ø–æ–≤–æ–¥—É"""
        gifts = []
        
        if occasion in GIFT_DATABASE["–ø–æ–≤–æ–¥"]:
            occasion_data = GIFT_DATABASE["–ø–æ–≤–æ–¥"][occasion]
            for budget_list in occasion_data.values():
                for gift_name in budget_list[:3]:
                    gift = self._create_gift_object(gift_name, occasion)
                    if gift:
                        gifts.append(gift)
        
        return gifts[:12]
    
    def find_gifts_by_season(self, season):
        """–ü–æ–∏—Å–∫ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ —Å–µ–∑–æ–Ω—É"""
        gifts = []
        
        if season in GIFT_DATABASE["—Å–µ–∑–æ–Ω–Ω—ã–µ"]:
            for gift_name in GIFT_DATABASE["—Å–µ–∑–æ–Ω–Ω—ã–µ"][season]:
                gift = self._create_gift_object(gift_name, season)
                if gift:
                    gifts.append(gift)
        
        return gifts[:12]
    
    def find_gifts_by_type(self, gift_type):
        """–ü–æ–∏—Å–∫ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ —Ç–∏–ø—É"""
        gifts = []
        
        if gift_type in GIFT_DATABASE["—Ç–∏–ø_–ø–æ–¥–∞—Ä–∫–∞"]:
            for gift_name in GIFT_DATABASE["—Ç–∏–ø_–ø–æ–¥–∞—Ä–∫–∞"][gift_type]:
                gift = self._create_gift_object(gift_name, gift_type)
                if gift:
                    gifts.append(gift)
        
        return gifts[:12]
    
    def find_gifts_by_popularity(self, popularity_type):
        """–ü–æ–∏—Å–∫ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏"""
        gifts = []
        
        if popularity_type in GIFT_DATABASE["–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å"]:
            for gift_name in GIFT_DATABASE["–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å"][popularity_type]:
                gift = self._create_gift_object(gift_name, popularity_type)
                if gift:
                    gift["–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å"] = popularity_type
                    gifts.append(gift)
        
        return gifts[:12]
    
    def get_gifts_by_rating(self):
        """–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–∫–∏ —Å –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º"""
        gifts = []
        
        for age_data in GIFT_DATABASE["–≤–æ–∑—Ä–∞—Å—Ç"].values():
            for category_gifts in age_data["–∫–∞—Ç–µ–≥–æ—Ä–∏–∏"].values():
                for gift in category_gifts:
                    if gift.get("—Ä–µ–π—Ç–∏–Ω–≥", 0) >= 4.7:
                        gifts.append(gift)
        
        gifts.sort(key=lambda x: x.get("—Ä–µ–π—Ç–∏–Ω–≥", 0), reverse=True)
        return gifts[:15]
    
    def _create_gift_object(self, gift_name, source):
        """–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –ø–æ–¥–∞—Ä–∫–∞"""
        # –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        for age_data in GIFT_DATABASE["–≤–æ–∑—Ä–∞—Å—Ç"].values():
            for category_gifts in age_data["–∫–∞—Ç–µ–≥–æ—Ä–∏–∏"].values():
                for gift in category_gifts:
                    if gift["–Ω–∞–∑–≤–∞–Ω–∏–µ"].lower() == gift_name.lower():
                        result = gift.copy()
                        result["–∏—Å—Ç–æ—á–Ω–∏–∫"] = source
                        return result
        
        # –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏, —Å–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–π
        return {
            "–Ω–∞–∑–≤–∞–Ω–∏–µ": gift_name,
            "—Ü–µ–Ω–∞": "1000-3000 —Ä—É–±",
            "–æ–ø–∏—Å–∞–Ω–∏–µ": "–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫",
            "—Ä–µ–π—Ç–∏–Ω–≥": 4.5,
            "–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å": 85
        }
    
    def add_to_favorites(self, user_id, gift_name):
        """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"""
        if user_id not in self.favorites:
            self.favorites[user_id] = []
        if gift_name not in self.favorites[user_id]:
            self.favorites[user_id].append(gift_name)
            return True
        return False
    
    def get_favorites(self, user_id):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ"""
        return self.favorites.get(user_id, [])
    
    def add_to_history(self, user_id, query):
        """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é"""
        if user_id not in self.user_preferences:
            self.user_preferences[user_id] = []
        self.user_preferences[user_id].append({
            "–∑–∞–ø—Ä–æ—Å": query,
            "–≤—Ä–µ–º—è": datetime.now().strftime("%d.%m.%Y %H:%M")
        })

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–º–æ—â–Ω–∏–∫–∞
gift_assistant = GiftAssistant()

@bot.message_handler(commands=['start', 'menu'])
def start(message):
    """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
    welcome_text = (
        "üéÅ *–ë–û–¢-–ü–û–ú–û–©–ù–ò–ö –ü–û –ü–û–î–ë–û–†–£ –ü–û–î–ê–†–ö–û–í*\n\n"
        "ü§ñ *–¢–ï–ü–ï–†–¨ –° OPENAI (DEEPSEEK) –ò–ò!*\n\n"
        "üëá *–í–´–ë–ï–†–ò–¢–ï –ù–£–ñ–ù–´–ô –†–ê–ó–î–ï–õ –ò–ó –ú–ï–ù–Æ –ù–ò–ñ–ï:*\n\n"
        "–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –≤–∏–¥–µ –∫–Ω–æ–ø–æ–∫ - –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ –∏ –≤—ã–±–∏—Ä–∞–π—Ç–µ!"
    )
    
    bot.send_message(message.chat.id, welcome_text, parse_mode='Markdown')
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    markup = gift_assistant.create_main_menu()
    bot.send_message(
        message.chat.id,
        "üìå *–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ*\n\n"
        "üéØ –ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ –Ω–∞–π—Ç–∏?",
        reply_markup=markup,
        parse_mode='Markdown'
    )

@bot.message_handler(commands=['help'])
def help_command(message):
    """–ü–æ–º–æ—â—å"""
    help_text = (
        "‚ùì *–ö–ê–ö –ü–û–õ–¨–ó–û–í–ê–¢–¨–°–Ø –ë–û–¢–û–ú*\n\n"
        "1Ô∏è‚É£ –ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –≤ –º–µ–Ω—é\n"
        "2Ô∏è‚É£ –í—ã–±–∏—Ä–∞–π—Ç–µ –Ω—É–∂–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\n"
        "3Ô∏è‚É£ –°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥–∞—Ä–∫–∏ –∏ –Ω–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π\n\n"
        "ü§ñ *–ù–û–í–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò –° OPENAI:*\n"
        "‚Ä¢ –£–º–Ω—ã–π –ø–æ–¥–±–æ—Ä –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –æ–ø–∏—Å–∞–Ω–∏—é\n"
        "‚Ä¢ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –∏–¥–µ–π\n"
        "‚Ä¢ –£–ª—É—á—à–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏–π –ø–æ–¥–∞—Ä–∫–æ–≤\n"
        "‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏\n\n"
        "üìå *–û–°–ù–û–í–ù–´–ï –†–ê–ó–î–ï–õ–´:*\n"
        "‚Ä¢ OpenAI –ü–æ–¥–±–æ—Ä - —É–º–Ω—ã–π –ø–æ–¥–±–æ—Ä\n"
        "‚Ä¢ –ü–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—é - –¥–ª—è –∫–æ–≥–æ –ø–æ–¥–∞—Ä–æ–∫\n"
        "‚Ä¢ –ü–æ —Ü–µ–Ω–µ - –≤–∞—à –±—é–¥–∂–µ—Ç\n"
        "‚Ä¢ –ü–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º - —É–≤–ª–µ—á–µ–Ω–∏—è —á–µ–ª–æ–≤–µ–∫–∞\n"
        "‚Ä¢ –ü–æ –≤–æ–∑—Ä–∞—Å—Ç—É - —Å–∫–æ–ª—å–∫–æ –ª–µ—Ç\n"
        "‚Ä¢ –ü–æ –ø–æ–≤–æ–¥—É - –ø—Ä–∞–∑–¥–Ω–∏–∫ –∏–ª–∏ —Å–æ–±—ã—Ç–∏–µ\n"
        "‚Ä¢ –ü–æ —Å–µ–∑–æ–Ω—É - –≤—Ä–µ–º—è –≥–æ–¥–∞\n"
        "‚Ä¢ –ü–æ —Ç–∏–ø—É - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ–¥–∞—Ä–∫–∞\n"
        "‚Ä¢ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ - –ª—É—á—à–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã\n"
        "‚Ä¢ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ\n"
        "‚Ä¢ –ò—Å—Ç–æ—Ä–∏—è - –≤–∞—à–∏ –∑–∞–ø—Ä–æ—Å—ã\n\n"
        "üí° –í—Å–µ –∫–Ω–æ–ø–∫–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ - –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ!"
    )
    
    bot.send_message(message.chat.id, help_text, parse_mode='Markdown')

@bot.callback_query_handler(func=lambda call: True)
def handle_callback(call):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫"""
    user_id = call.from_user.id
    chat_id = call.message.chat.id
    message_id = call.message.message_id
    
    # –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ
    if call.data == "menu_main":
        markup = gift_assistant.create_main_menu()
        bot.edit_message_text(
            "üìå *–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ*\n\nüéØ –ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ –Ω–∞–π—Ç–∏?",
            chat_id,
            message_id,
            reply_markup=markup,
            parse_mode='Markdown'
        )
    
    # –ú–ï–ù–Æ OPENAI
    elif call.data == "menu_openai":
        markup = gift_assistant.create_openai_menu()
        bot.edit_message_text(
            "ü§ñ *OPENAI - –£–ú–ù–´–ô –ü–û–î–ë–û–† –ü–û–î–ê–†–ö–û–í*\n\n"
            "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥–∞—Ä–∫–∞!\n\n"
            "üéØ *–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:*\n"
            "‚Ä¢ –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞\n"
            "‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏\n"
            "‚Ä¢ –ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –∏–¥–µ–∏\n"
            "‚Ä¢ –£–ª—É—á—à–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏–π\n\n"
            "üëá *–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:*",
            chat_id,
            message_id,
            reply_markup=markup,
            parse_mode='Markdown'
        )
    
    elif call.data == "openai_gift":
        msg = bot.send_message(
            chat_id,
            "ü§ñ *–û–ü–ò–®–ò–¢–ï, –ö–û–ú–£ –ù–£–ñ–ï–ù –ü–û–î–ê–†–û–ö*\n\n"
            "–ù–∞–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ:\n"
            "‚Ä¢ –ö–æ–º—É (–≤–æ–∑—Ä–∞—Å—Ç, –ø–æ–ª)\n"
            "‚Ä¢ –ü–æ –∫–∞–∫–æ–º—É –ø–æ–≤–æ–¥—É\n"
            "‚Ä¢ –ö–∞–∫–æ–π –±—é–¥–∂–µ—Ç\n"
            "‚Ä¢ –ò–Ω—Ç–µ—Ä–µ—Å—ã –∏ —Ö–æ–±–±–∏\n\n"
            "‚ú® *OpenAI –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –ø–æ–¥–±–µ—Ä–µ—Ç –ª—É—á—à–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã!*\n\n"
            "–ü—Ä–∏–º–µ—Ä: *–ù—É–∂–µ–Ω –ø–æ–¥–∞—Ä–æ–∫ –¥–ª—è –º–∞–º—ã 50 –ª–µ—Ç –Ω–∞ —é–±–∏–ª–µ–π, –ª—é–±–∏—Ç –≥–æ—Ç–æ–≤–∏—Ç—å –∏ —á–∏—Ç–∞—Ç—å, –±—é–¥–∂–µ—Ç –¥–æ 10000 —Ä—É–±–ª–µ–π*",
            parse_mode='Markdown'
        )
        bot.register_next_step_handler(msg, process_openai_gift_request)
    
    elif call.data == "openai_interests":
        msg = bot.send_message(
            chat_id,
            "üéØ *–ù–ê–ü–ò–®–ò–¢–ï –ò–ù–¢–ï–†–ï–°–´ –ß–ï–õ–û–í–ï–ö–ê*\n\n"
            "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, —á–µ–º —É–≤–ª–µ–∫–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∞—Ç–µ–ª—å:\n"
            "‚Ä¢ –•–æ–±–±–∏\n"
            "‚Ä¢ –õ—é–±–∏–º—ã–µ –∑–∞–Ω—è—Ç–∏—è\n"
            "‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏—è\n\n"
            "‚ú® *OpenAI –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –∏–¥–µ–∏ –ø–æ–¥–∞—Ä–∫–æ–≤ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º!*\n\n"
            "–ü—Ä–∏–º–µ—Ä: *–£–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è–º–∏ –∏ –π–æ–≥–æ–π*",
            parse_mode='Markdown'
        )
        bot.register_next_step_handler(msg, process_openai_interests)
    
    elif call.data == "openai_creative":
        msg = bot.send_message(
            chat_id,
            "üé® *–ö–†–ï–ê–¢–ò–í–ù–´–ï –ò–î–ï–ò –ü–û–î–ê–†–ö–û–í*\n\n"
            "–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é, –∏ OpenAI –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –Ω–µ–æ–±—ã—á–Ω—ã–µ –∏–¥–µ–∏:\n"
            "‚Ä¢ –î–ª—è –∫–æ–≥–æ\n"
            "‚Ä¢ –ü–æ –∫–∞–∫–æ–º—É –ø–æ–≤–æ–¥—É\n"
            "‚Ä¢ –ß—Ç–æ —É–∂–µ –¥–∞—Ä–∏–ª–∏\n\n"
            "–ü—Ä–∏–º–µ—Ä: *–ü–æ–¥–∞—Ä–æ–∫ –¥–ª—è –ø–∞—Ä–Ω—è, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å—ë –µ—Å—Ç—å, –Ω–∞ 25 –ª–µ—Ç*",
            parse_mode='Markdown'
        )
        bot.register_next_step_handler(msg, process_openai_creative)
    
    elif call.data == "openai_custom":
        msg = bot.send_message(
            chat_id,
            "üìù *–û–ü–ò–®–ò–¢–ï –í–ê–® –ó–ê–ü–†–û–°*\n\n"
            "–ù–∞–ø–∏—à–∏—Ç–µ –ª—é–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è, –∏ OpenAI –ø–æ–¥–±–µ—Ä–µ—Ç –ø–æ–¥–∞—Ä–æ–∫!\n\n"
            "–ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å:\n"
            "‚Ä¢ –û—Å–æ–±—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è\n"
            "‚Ä¢ –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è\n"
            "‚Ä¢ –ò–¥–µ–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç\n\n"
            "–ü—Ä–∏–º–µ—Ä: *–ò—â—É –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –¥–ª—è –¥–µ–≤—É—à–∫–∏, –Ω–µ —Ü–≤–µ—Ç—ã –∏ –Ω–µ –∫–æ—Å–º–µ—Ç–∏–∫—É*",
            parse_mode='Markdown'
        )
        bot.register_next_step_handler(msg, process_openai_custom)
    
    # –†–ê–ó–î–ï–õ–´ –ú–ï–ù–Æ
    elif call.data == "menu_gift":
        msg = bot.send_message(
            chat_id,
            "‚úèÔ∏è *–û–ü–ò–®–ò–¢–ï, –ö–û–ú–£ –ù–£–ñ–ï–ù –ü–û–î–ê–†–û–ö*\n\n"
            "–ù–∞–ø–∏—à–∏—Ç–µ –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏:\n"
            "‚Ä¢ –í–æ–∑—Ä–∞—Å—Ç\n"
            "‚Ä¢ –ü–æ–≤–æ–¥\n"
            "‚Ä¢ –ë—é–¥–∂–µ—Ç\n"
            "‚Ä¢ –ò–Ω—Ç–µ—Ä–µ—Å—ã\n\n"
            "–ü—Ä–∏–º–µ—Ä: *–ü–æ–¥–∞—Ä–æ–∫ –¥–ª—è –º–∞–ª—å—á–∏–∫–∞ 8 –ª–µ—Ç –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è, –ª—é–±–∏—Ç —Ñ—É—Ç–±–æ–ª, –±—é–¥–∂–µ—Ç 3000 —Ä—É–±–ª–µ–π*",
            parse_mode='Markdown'
        )
        bot.register_next_step_handler(msg, process_gift_request)
        
    elif call.data == "menu_recipient":
        markup = gift_assistant.create_recipient_menu()
        bot.edit_message_text(
            "üë§ *–í–´–ë–ï–†–ò–¢–ï –ü–û–õ–£–ß–ê–¢–ï–õ–Ø*",
            chat_id,
            message_id,
            reply_markup=markup,
            parse_mode='Markdown'
        )
        
    elif call.data == "menu_price":
        markup = gift_assistant.create_price_menu()
        bot.edit_message_text(
            "üí∞ *–í–´–ë–ï–†–ò–¢–ï –¶–ï–ù–û–í–û–ô –î–ò–ê–ü–ê–ó–û–ù*",
            chat_id,
            message_id,
            reply_markup=markup,
            parse_mode='Markdown'
        )
        
    elif call.data == "menu_interests":
        markup = gift_assistant.create_interest_menu()
        bot.edit_message_text(
            "üéØ *–í–´–ë–ï–†–ò–¢–ï –ò–ù–¢–ï–†–ï–° –ü–û–õ–£–ß–ê–¢–ï–õ–Ø*",
            chat_id,
            message_id,
            reply_markup=markup,
            parse_mode='Markdown'
        )
        
    elif call.data == "menu_age":
        markup = gift_assistant.create_age_menu()
        bot.edit_message_text(
            "üë∂ *–í–´–ë–ï–†–ò–¢–ï –í–û–ó–†–ê–°–¢ –ü–û–õ–£–ß–ê–¢–ï–õ–Ø*",
            chat_id,
            message_id,
            reply_markup=markup,
            parse_mode='Markdown'
        )
        
    elif call.data == "menu_occasion":
        markup = gift_assistant.create_occasion_menu()
        bot.edit_message_text(
            "üéâ *–í–´–ë–ï–†–ò–¢–ï –ü–û–í–û–î –î–õ–Ø –ü–û–î–ê–†–ö–ê*",
            chat_id,
            message_id,
            reply_markup=markup,
            parse_mode='Markdown'
        )
        
    elif call.data == "menu_season":
        markup = gift_assistant.create_season_menu()
        bot.edit_message_text(
            "üìÖ *–í–´–ë–ï–†–ò–¢–ï –í–†–ï–ú–Ø –ì–û–î–ê*",
            chat_id,
            message_id,
            reply_markup=markup,
            parse_mode='Markdown'
        )
        
    elif call.data == "menu_type":
        markup = gift_assistant.create_type_menu()
        bot.edit_message_text(
            "üìã *–í–´–ë–ï–†–ò–¢–ï –¢–ò–ü –ü–û–î–ê–†–ö–ê*",
            chat_id,
            message_id,
            reply_markup=markup,
            parse_mode='Markdown'
        )
        
    elif call.data == "menu_popular":
        markup = gift_assistant.create_popularity_menu()
        bot.edit_message_text(
            "üèÜ *–í–´–ë–ï–†–ò–¢–ï –ö–ê–¢–ï–ì–û–†–ò–Æ –ü–û–ü–£–õ–Ø–†–ù–û–°–¢–ò*",
            chat_id,
            message_id,
            reply_markup=markup,
            parse_mode='Markdown'
        )
        
    elif call.data == "menu_favorites":
        favorites = gift_assistant.get_favorites(user_id)
        
        if favorites:
            response = "‚ù§Ô∏è *–í–ê–®–ï –ò–ó–ë–†–ê–ù–ù–û–ï*\n\n"
            for i, gift in enumerate(favorites[-10:], 1):
                response += f"{i}. {gift}\n"
        else:
            response = "üòî –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤"
            
        bot.edit_message_text(
            response,
            chat_id,
            message_id,
            reply_markup=gift_assistant.create_back_button(),
            parse_mode='Markdown'
        )
        
    elif call.data == "menu_history":
        history = gift_assistant.user_preferences.get(user_id, [])
        
        if history:
            response = "üìä *–ò–°–¢–û–†–ò–Ø –ó–ê–ü–†–û–°–û–í*\n\n"
            for i, item in enumerate(history[-5:], 1):
                response += f"{i}. {item.get('–∑–∞–ø—Ä–æ—Å', '–ó–∞–ø—Ä–æ—Å')}\n   ‚è∞ {item.get('–≤—Ä–µ–º—è', '')}\n\n"
        else:
            response = "üì≠ –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤"
            
        bot.edit_message_text(
            response,
            chat_id,
            message_id,
            reply_markup=gift_assistant.create_back_button(),
            parse_mode='Markdown'
        )
        
    elif call.data == "menu_help":
        help_command(call.message)
        bot.answer_callback_query(call.id)
    
    # –û–ë–†–ê–ë–û–¢–ö–ê –¶–ï–ù
    elif call.data.startswith("price_"):
        price_range = call.data.replace("price_", "")
        gifts = gift_assistant.find_gifts_by_price(price_range)
        
        if gifts:
            response = f"üí∞ *–ü–û–î–ê–†–ö–ò –î–û {price_range} –†–£–ë*\n\n"
            for i, gift in enumerate(gifts[:8], 1):
                response += f"{i}. *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*\n"
                response += f"   ‚≠ê {gift.get('—Ä–µ–π—Ç–∏–Ω–≥', 4.5)} | üí∞ {gift.get('—Ü–µ–Ω–∞', '–£—Ç–æ—á–Ω—è–π—Ç–µ')}\n"
                response += f"   üìù {gift.get('–æ–ø–∏—Å–∞–Ω–∏–µ', '–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫')[:50]}...\n\n"
                
            bot.edit_message_text(
                response,
                chat_id,
                message_id,
                reply_markup=gift_assistant.create_back_button("menu_price"),
                parse_mode='Markdown'
            )
            
            # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä–≤—ã—Ö 3 –ø–æ–¥–∞—Ä–∫–æ–≤
            for gift in gifts[:3]:
                markup = gift_assistant.create_gift_action_buttons(gift['–Ω–∞–∑–≤–∞–Ω–∏–µ'])
                bot.send_message(
                    chat_id,
                    f"üéÅ *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*\nüí° –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π",
                    reply_markup=markup,
                    parse_mode='Markdown'
                )
        else:
            bot.answer_callback_query(call.id, "üòî –ü–æ–¥–∞—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã", show_alert=True)
    
    # –û–ë–†–ê–ë–û–¢–ö–ê –ü–û–õ–£–ß–ê–¢–ï–õ–ï–ô
    elif call.data.startswith("recipient_"):
        recipient = call.data.replace("recipient_", "")
        gifts = gift_assistant.find_gifts_by_recipient(recipient)
        
        if gifts:
            response = f"üë§ *–ü–û–î–ê–†–ö–ò –î–õ–Ø {recipient.upper()}*\n\n"
            for i, gift in enumerate(gifts[:8], 1):
                response += f"{i}. *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*\n"
                response += f"   ‚≠ê {gift.get('—Ä–µ–π—Ç–∏–Ω–≥', 4.5)} | üí∞ {gift.get('—Ü–µ–Ω–∞', '–£—Ç–æ—á–Ω—è–π—Ç–µ')}\n\n"
                
            bot.edit_message_text(
                response,
                chat_id,
                message_id,
                reply_markup=gift_assistant.create_back_button("menu_recipient"),
                parse_mode='Markdown'
            )
            
            for gift in gifts[:3]:
                markup = gift_assistant.create_gift_action_buttons(gift['–Ω–∞–∑–≤–∞–Ω–∏–µ'])
                bot.send_message(
                    chat_id,
                    f"üéÅ *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*",
                    reply_markup=markup,
                    parse_mode='Markdown'
                )
        else:
            bot.answer_callback_query(call.id, "üòî –ü–æ–¥–∞—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã", show_alert=True)
    
    # –û–ë–†–ê–ë–û–¢–ö–ê –ò–ù–¢–ï–†–ï–°–û–í
    elif call.data.startswith("interest_"):
        interest = call.data.replace("interest_", "")
        gifts = gift_assistant.find_gifts_by_interest(interest)
        
        if gifts:
            response = f"üéØ *–ü–û–î–ê–†–ö–ò –î–õ–Ø –£–í–õ–ï–ß–ï–ù–ù–´–• {interest.upper()}*\n\n"
            for i, gift in enumerate(gifts[:8], 1):
                response += f"{i}. *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*\n"
                response += f"   ‚≠ê {gift.get('—Ä–µ–π—Ç–∏–Ω–≥', 4.5)} | üí∞ {gift.get('—Ü–µ–Ω–∞', '–£—Ç–æ—á–Ω—è–π—Ç–µ')}\n\n"
                
            bot.edit_message_text(
                response,
                chat_id,
                message_id,
                reply_markup=gift_assistant.create_back_button("menu_interests"),
                parse_mode='Markdown'
            )
            
            for gift in gifts[:3]:
                markup = gift_assistant.create_gift_action_buttons(gift['–Ω–∞–∑–≤–∞–Ω–∏–µ'])
                bot.send_message(
                    chat_id,
                    f"üéÅ *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*",
                    reply_markup=markup,
                    parse_mode='Markdown'
                )
        else:
            bot.answer_callback_query(call.id, "üòî –ü–æ–¥–∞—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã", show_alert=True)
    
    # –û–ë–†–ê–ë–û–¢–ö–ê –í–û–ó–†–ê–°–¢–û–í
    elif call.data.startswith("age_"):
        age_range = call.data.replace("age_", "")
        gifts = gift_assistant.find_gifts_by_age(age_range)
        
        if gifts:
            response = f"üë∂ *–ü–û–î–ê–†–ö–ò –î–õ–Ø –í–û–ó–†–ê–°–¢–ê {age_range}*\n\n"
            for i, gift in enumerate(gifts[:8], 1):
                response += f"{i}. *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*\n"
                response += f"   ‚≠ê {gift.get('—Ä–µ–π—Ç–∏–Ω–≥', 4.5)} | üí∞ {gift.get('—Ü–µ–Ω–∞', '–£—Ç–æ—á–Ω—è–π—Ç–µ')}\n\n"
                
            bot.edit_message_text(
                response,
                chat_id,
                message_id,
                reply_markup=gift_assistant.create_back_button("menu_age"),
                parse_mode='Markdown'
            )
            
            for gift in gifts[:3]:
                markup = gift_assistant.create_gift_action_buttons(gift['–Ω–∞–∑–≤–∞–Ω–∏–µ'])
                bot.send_message(
                    chat_id,
                    f"üéÅ *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*",
                    reply_markup=markup,
                    parse_mode='Markdown'
                )
        else:
            bot.answer_callback_query(call.id, "üòî –ü–æ–¥–∞—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã", show_alert=True)
    
    # –û–ë–†–ê–ë–û–¢–ö–ê –ü–û–í–û–î–û–í
    elif call.data.startswith("occasion_"):
        occasion = call.data.replace("occasion_", "")
        gifts = gift_assistant.find_gifts_by_occasion(occasion)
        
        occasion_names = {
            "–¥–µ–Ω—å_—Ä–æ–∂–¥–µ–Ω–∏—è": "–î–ï–ù–¨ –†–û–ñ–î–ï–ù–ò–Ø",
            "–Ω–æ–≤—ã–π_–≥–æ–¥": "–ù–û–í–´–ô –ì–û–î",
            "8_–º–∞—Ä—Ç–∞": "8 –ú–ê–†–¢–ê",
            "23_—Ñ–µ–≤—Ä–∞–ª—è": "23 –§–ï–í–†–ê–õ–Ø",
            "—Å–≤–∞–¥—å–±–∞": "–°–í–ê–î–¨–ë–ê",
            "–¥–µ–Ω—å_—Å–≤—è—Ç–æ–≥–æ_–≤–∞–ª–µ–Ω—Ç–∏–Ω–∞": "–î–ï–ù–¨ –í–õ–Æ–ë–õ–ï–ù–ù–´–•",
            "—é–±–∏–ª–µ–π": "–Æ–ë–ò–õ–ï–ô",
            "–±–µ–∑_–ø–æ–≤–æ–¥–∞": "–ë–ï–ó –ü–û–í–û–î–ê"
        }
        
        occasion_name = occasion_names.get(occasion, occasion)
        
        if gifts:
            response = f"üéâ *–ü–û–î–ê–†–ö–ò –ù–ê {occasion_name}*\n\n"
            for i, gift in enumerate(gifts[:8], 1):
                response += f"{i}. *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*\n"
                response += f"   ‚≠ê {gift.get('—Ä–µ–π—Ç–∏–Ω–≥', 4.5)} | üí∞ {gift.get('—Ü–µ–Ω–∞', '–£—Ç–æ—á–Ω—è–π—Ç–µ')}\n\n"
                
            bot.edit_message_text(
                response,
                chat_id,
                message_id,
                reply_markup=gift_assistant.create_back_button("menu_occasion"),
                parse_mode='Markdown'
            )
            
            for gift in gifts[:3]:
                markup = gift_assistant.create_gift_action_buttons(gift['–Ω–∞–∑–≤–∞–Ω–∏–µ'])
                bot.send_message(
                    chat_id,
                    f"üéÅ *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*",
                    reply_markup=markup,
                    parse_mode='Markdown'
                )
        else:
            bot.answer_callback_query(call.id, "üòî –ü–æ–¥–∞—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã", show_alert=True)
    
    # –û–ë–†–ê–ë–û–¢–ö–ê –°–ï–ó–û–ù–û–í
    elif call.data.startswith("season_"):
        season = call.data.replace("season_", "")
        gifts = gift_assistant.find_gifts_by_season(season)
        
        if gifts:
            response = f"üìÖ *–ü–û–î–ê–†–ö–ò –î–õ–Ø {season.upper()}*\n\n"
            for i, gift in enumerate(gifts[:8], 1):
                response += f"{i}. *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*\n"
                response += f"   ‚≠ê {gift.get('—Ä–µ–π—Ç–∏–Ω–≥', 4.5)} | üí∞ {gift.get('—Ü–µ–Ω–∞', '–£—Ç–æ—á–Ω—è–π—Ç–µ')}\n\n"
                
            bot.edit_message_text(
                response,
                chat_id,
                message_id,
                reply_markup=gift_assistant.create_back_button("menu_season"),
                parse_mode='Markdown'
            )
            
            for gift in gifts[:3]:
                markup = gift_assistant.create_gift_action_buttons(gift['–Ω–∞–∑–≤–∞–Ω–∏–µ'])
                bot.send_message(
                    chat_id,
                    f"üéÅ *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*",
                    reply_markup=markup,
                    parse_mode='Markdown'
                )
        else:
            bot.answer_callback_query(call.id, "üòî –ü–æ–¥–∞—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã", show_alert=True)
    
    # –û–ë–†–ê–ë–û–¢–ö–ê –¢–ò–ü–û–í –ü–û–î–ê–†–ö–û–í
    elif call.data.startswith("type_"):
        gift_type = call.data.replace("type_", "")
        gifts = gift_assistant.find_gifts_by_type(gift_type)
        
        if gifts:
            response = f"üìã *–ü–û–î–ê–†–ö–ò –¢–ò–ü–ê {gift_type.upper()}*\n\n"
            for i, gift in enumerate(gifts[:8], 1):
                response += f"{i}. *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*\n"
                response += f"   ‚≠ê {gift.get('—Ä–µ–π—Ç–∏–Ω–≥', 4.5)} | üí∞ {gift.get('—Ü–µ–Ω–∞', '–£—Ç–æ—á–Ω—è–π—Ç–µ')}\n\n"
                
            bot.edit_message_text(
                response,
                chat_id,
                message_id,
                reply_markup=gift_assistant.create_back_button("menu_type"),
                parse_mode='Markdown'
            )
            
            for gift in gifts[:3]:
                markup = gift_assistant.create_gift_action_buttons(gift['–Ω–∞–∑–≤–∞–Ω–∏–µ'])
                bot.send_message(
                    chat_id,
                    f"üéÅ *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*",
                    reply_markup=markup,
                    parse_mode='Markdown'
                )
        else:
            bot.answer_callback_query(call.id, "üòî –ü–æ–¥–∞—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã", show_alert=True)
    
    # –û–ë–†–ê–ë–û–¢–ö–ê –ü–û–ü–£–õ–Ø–†–ù–û–°–¢–ò
    elif call.data.startswith("popular_"):
        pop_type = call.data.replace("popular_", "")
        
        if pop_type == "rating":
            gifts = gift_assistant.get_gifts_by_rating()
            title = "–° –í–´–°–û–ö–ò–ú –†–ï–ô–¢–ò–ù–ì–û–ú"
        else:
            gifts = gift_assistant.find_gifts_by_popularity(pop_type)
            title = pop_type.upper()
        
        if gifts:
            response = f"üèÜ *{title}*\n\n"
            for i, gift in enumerate(gifts[:8], 1):
                response += f"{i}. *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*\n"
                response += f"   ‚≠ê {gift.get('—Ä–µ–π—Ç–∏–Ω–≥', 4.5)} | üí∞ {gift.get('—Ü–µ–Ω–∞', '–£—Ç–æ—á–Ω—è–π—Ç–µ')}\n\n"
                
            bot.edit_message_text(
                response,
                chat_id,
                message_id,
                reply_markup=gift_assistant.create_back_button("menu_popular"),
                parse_mode='Markdown'
            )
            
            for gift in gifts[:3]:
                markup = gift_assistant.create_gift_action_buttons(gift['–Ω–∞–∑–≤–∞–Ω–∏–µ'])
                bot.send_message(
                    chat_id,
                    f"üéÅ *{gift['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*",
                    reply_markup=markup,
                    parse_mode='Markdown'
                )
        else:
            bot.answer_callback_query(call.id, "üòî –ü–æ–¥–∞—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã", show_alert=True)
    
    # –î–ï–ô–°–¢–í–ò–Ø –° –ü–û–î–ê–†–ö–ê–ú–ò
    elif call.data.startswith("fav_"):
        gift_name = call.data.replace("fav_", "")
        success = gift_assistant.add_to_favorites(user_id, gift_name)
        
        if success:
            bot.answer_callback_query(call.id, f"‚úÖ {gift_name} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!")
        else:
            bot.answer_callback_query(call.id, f"‚ÑπÔ∏è {gift_name} —É–∂–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º")
    
    elif call.data.startswith("buy_"):
        gift_name = call.data.replace("buy_", "")
        
        response = (
            f"üõí *–ì–î–ï –ö–£–ü–ò–¢–¨ {gift_name}:*\n\n"
            "üõç [Wildberries](https://www.wildberries.ru)\n"
            "üõç [Ozon](https://www.ozon.ru)\n"
            "üõç [–Ø–Ω–¥–µ–∫—Å.–ú–∞—Ä–∫–µ—Ç](https://market.yandex.ru)\n"
            "üõç [DNS](https://www.dns-shop.ru)\n"
            "üõç [–ú.–í–∏–¥–µ–æ](https://www.mvideo.ru)\n\n"
            "üí° *–°–æ–≤–µ—Ç:* –°—Ä–∞–≤–Ω–∏—Ç–µ —Ü–µ–Ω—ã –Ω–∞ –≤—Å–µ—Ö –ø–ª–æ—â–∞–¥–∫–∞—Ö!"
        )
        
        bot.send_message(chat_id, response, parse_mode='Markdown')
        bot.answer_callback_query(call.id)
    
    elif call.data.startswith("similar_"):
        gift_name = call.data.replace("similar_", "")
        
        response = (
            f"üîÑ *–ü–û–•–û–ñ–ò–ï –ù–ê {gift_name}:*\n\n"
            "1. –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –¥—Ä—É–≥–æ–π –º–∞—Ä–∫–∏\n"
            "2. –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –¥–æ–ø. —Ñ—É–Ω–∫—Ü–∏—è–º–∏\n"
            "3. –ë—é–¥–∂–µ—Ç–Ω—ã–π –∞–Ω–∞–ª–æ–≥\n"
            "4. –ü—Ä–µ–º–∏—É–º –≤–µ—Ä—Å–∏—è\n"
            "5. –ü–æ–¥–∞—Ä–æ–∫ –∏–∑ —Ç–æ–π –∂–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\n\n"
            "üí° *–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–¥–±–æ—Ä–∞!*"
        )
        
        bot.send_message(chat_id, response, parse_mode='Markdown')
        bot.answer_callback_query(call.id)
    
    elif call.data.startswith("reviews_"):
        gift_name = call.data.replace("reviews_", "")
        
        rating = random.randint(45, 50) / 10
        reviews_count = random.randint(50, 500)
        
        response = (
            f"üìù *–û–¢–ó–´–í–´ –ù–ê {gift_name}:*\n\n"
            f"‚≠ê *–û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥:* {rating}/5.0\n"
            f"üë• *–í—Å–µ–≥–æ –æ—Ç–∑—ã–≤–æ–≤:* {reviews_count}\n\n"
            "*–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∑—ã–≤—ã:*\n"
            "‚Ä¢ –ê–Ω–Ω–∞: \"–û—Ç–ª–∏—á–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫, –∫–∞—á–µ—Å—Ç–≤–æ –Ω–∞ –≤—ã—Å–æ—Ç–µ!\"\n"
            "‚Ä¢ –ú–∏—Ö–∞–∏–ª: \"–î–æ–≤–æ–ª–µ–Ω –ø–æ–∫—É–ø–∫–æ–π, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é\"\n"
            "‚Ä¢ –ï–ª–µ–Ω–∞: \"–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—é, —Ö–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä\"\n\n"
            "üí° *–ü–æ—á–∏—Ç–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç–∑—ã–≤—ã –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞—Ö!*"
        )
        
        bot.send_message(chat_id, response, parse_mode='Markdown')
        bot.answer_callback_query(call.id)
    
    elif call.data.startswith("details_"):
        gift_name = call.data.replace("details_", "")
        
        # –ü–æ–∏—Å–∫ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–¥–∞—Ä–∫–µ
        gift_details = None
        for age_data in GIFT_DATABASE["–≤–æ–∑—Ä–∞—Å—Ç"].values():
            for category_gifts in age_data["–∫–∞—Ç–µ–≥–æ—Ä–∏–∏"].values():
                for gift in category_gifts:
                    if gift["–Ω–∞–∑–≤–∞–Ω–∏–µ"].lower() == gift_name.lower():
                        gift_details = gift
                        break
        
        if gift_details:
            response = (
                f"üìå *–ü–û–î–†–û–ë–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø*\n\n"
                f"üéÅ *{gift_details['–Ω–∞–∑–≤–∞–Ω–∏–µ']}*\n"
                f"üí∞ *–¶–µ–Ω–∞:* {gift_details.get('—Ü–µ–Ω–∞', '–£—Ç–æ—á–Ω—è–π—Ç–µ')}\n"
                f"‚≠ê *–†–µ–π—Ç–∏–Ω–≥:* {gift_details.get('—Ä–µ–π—Ç–∏–Ω–≥', 4.5)}/5.0\n"
                f"üî• *–ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å:* {gift_details.get('–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å', 85)}%\n\n"
                f"üìù *–û–ø–∏—Å–∞–Ω–∏–µ:*\n{gift_details.get('–æ–ø–∏—Å–∞–Ω–∏–µ', '–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫')}\n\n"
                f"üí° *–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:*\n"
                f"‚Ä¢ –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–æ–¥–∞—Ä–∫–∞\n"
                f"‚Ä¢ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ\n"
                f"‚Ä¢ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã"
            )
        else:
            response = f"üìå *–ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ü–û–î–ê–†–ö–ï*\n\n{gift_name}\n\n–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ —Å –≤—ã—Å–æ–∫–∏–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏"
        
        bot.send_message(chat_id, response, parse_mode='Markdown')
        bot.answer_callback_query(call.id)
    
    elif call.data.startswith("share_"):
        gift_name = call.data.replace("share_", "")
        
        share_text = f"üéÅ –ü–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫–æ–π –∫–ª–∞—Å—Å–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ —è –Ω–∞—à–µ–ª: {gift_name}! #–ø–æ–¥–∞—Ä–æ–∫ #–∏–¥–µ–∏–ø–æ–¥–∞—Ä–∫–æ–≤"
        
        bot.send_message(
            chat_id,
            f"üì§ *–ü–û–î–ï–õ–ò–¢–¨–°–Ø –ü–û–î–ê–†–ö–û–ú*\n\n"
            f"–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç:\n`{share_text}`\n\n"
            f"–ò –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –¥—Ä—É–∑—å—è–º!",
            parse_mode='Markdown'
        )
        bot.answer_callback_query(call.id)
    
    elif call.data.startswith("enhance_"):
        gift_name = call.data.replace("enhance_", "")
        
        bot.send_message(chat_id, f"ü§ñ OpenAI —É–ª—É—á—à–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞ *{gift_name}*...", parse_mode='Markdown')
        
        enhanced = openai_advisor.enhance_gift_description(gift_name)
        
        if enhanced:
            response = (
                f"‚ú® *–£–õ–£–ß–®–ï–ù–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –û–¢ OPENAI*\n\n"
                f"üéÅ *{gift_name}*\n\n"
                f"{enhanced}\n\n"
                f"ü§ñ *OpenAI (DeepSeek)*"
            )
        else:
            response = f"üòî –ù–µ —É–¥–∞–ª–æ—Å—å —É–ª—É—á—à–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
        
        bot.send_message(chat_id, response, parse_mode='Markdown')
        bot.answer_callback_query(call.id)

def process_openai_gift_request(message):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ OpenAI –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –ø–æ–¥–∞—Ä–∫–∞"""
    user_id = message.from_user.id
    request_text = message.text
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
    gift_assistant.add_to_history(user_id, request_text)
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∞—á–∞–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    bot.send_message(
        message.chat.id,
        "ü§ñ *OpenAI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à –∑–∞–ø—Ä–æ—Å...*\n\n"
        "–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ ‚è≥",
        parse_mode='Markdown'
    )
    
    # –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç OpenAI
    recommendations = openai_advisor.get_gift_recommendations(request_text, user_id)
    
    if recommendations:
        # –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
        response = "ü§ñ *–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò OPENAI (DEEPSEEK)*\n\n"
        
        # –ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞
        analysis = recommendations.get('analysis', {})
        if analysis:
            response += "üìä *–ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞:*\n"
            if analysis.get('–≤–æ–∑—Ä–∞—Å—Ç') and analysis['–≤–æ–∑—Ä–∞—Å—Ç'] != '–Ω–µ —É–∫–∞–∑–∞–Ω':
                response += f"‚Ä¢ –í–æ–∑—Ä–∞—Å—Ç: {analysis['–≤–æ–∑—Ä–∞—Å—Ç']}\n"
            if analysis.get('–ø–æ–ª') and analysis['–ø–æ–ª'] != '–Ω–µ —É–∫–∞–∑–∞–Ω':
                response += f"‚Ä¢ –ü–æ–ª: {analysis['–ø–æ–ª']}\n"
            if analysis.get('–ø–æ–≤–æ–¥') and analysis['–ø–æ–≤–æ–¥'] != '–Ω–µ —É–∫–∞–∑–∞–Ω':
                response += f"‚Ä¢ –ü–æ–≤–æ–¥: {analysis['–ø–æ–≤–æ–¥']}\n"
            if analysis.get('–±—é–¥–∂–µ—Ç') and analysis['–±—é–¥–∂–µ—Ç'] != '–Ω–µ —É–∫–∞–∑–∞–Ω':
                response += f"‚Ä¢ –ë—é–¥–∂–µ—Ç: {analysis['–±—é–¥–∂–µ—Ç']}\n"
            if analysis.get('–∏–Ω—Ç–µ—Ä–µ—Å—ã'):
                response += f"‚Ä¢ –ò–Ω—Ç–µ—Ä–µ—Å—ã: {', '.join(analysis['–∏–Ω—Ç–µ—Ä–µ—Å—ã'])}\n"
            response += "\n"
        
        # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ–¥–∞—Ä–∫–æ–≤
        recommendations_list = recommendations.get('recommendations', [])
        if recommendations_list:
            response += "üéØ *–õ—É—á—à–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:*\n\n"
            
            for i, gift in enumerate(recommendations_list[:5], 1):
                response += f"{i}. *{gift.get('–Ω–∞–∑–≤–∞–Ω–∏–µ', '–ü–æ–¥–∞—Ä–æ–∫')}*\n"
                response += f"   üí∞ –¶–µ–Ω–∞: {gift.get('—Ü–µ–Ω–∞', '–£—Ç–æ—á–Ω—è–π—Ç–µ')}\n"
                response += f"   üìù {gift.get('–æ–ø–∏—Å–∞–Ω–∏–µ', '')}\n"
                response += f"   ‚ú® –ü–æ—á–µ–º—É: {gift.get('–ø–æ—á–µ–º—É_–ø–æ–¥—Ö–æ–¥–∏—Ç', '')}\n\n"
                
                # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–∞—Ä–∫–∞
                markup = gift_assistant.create_gift_action_buttons(gift.get('–Ω–∞–∑–≤–∞–Ω–∏–µ', ''))
                bot.send_message(
                    message.chat.id,
                    f"üéÅ *{gift.get('–Ω–∞–∑–≤–∞–Ω–∏–µ', '')}*",
                    reply_markup=markup,
                    parse_mode='Markdown'
                )
        
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–æ–≤–µ—Ç
        advice = recommendations.get('advice')
        if advice:
            response += f"üí° *–°–æ–≤–µ—Ç OpenAI:*\n{advice}\n\n"
        
        response += "ü§ñ *–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã OpenAI (DeepSeek)*"
        
        bot.send_message(message.chat.id, response, parse_mode='Markdown')
    else:
        # –ï—Å–ª–∏ OpenAI –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫
        bot.send_message(
            message.chat.id,
            "üòî OpenAI –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É—é –æ–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫...",
            parse_mode='Markdown'
        )
        process_gift_request(message)

def process_openai_interests(message):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º"""
    interests = message.text
    
    prompt = f"–ü—Ä–µ–¥–ª–æ–∂–∏ 5 –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –∏–¥–µ–π –ø–æ–¥–∞—Ä–∫–æ–≤ –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞ —Å –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏: {interests}. –£–∫–∞–∂–∏ —Ü–µ–Ω—É –∏ –ø–æ—á–µ–º—É –ø–æ–¥—Ö–æ–¥–∏—Ç."
    
    bot.send_message(
        message.chat.id,
        "ü§ñ *OpenAI –∏—â–µ—Ç –∏–¥–µ–∏ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º...*\n\n–≠—Ç–æ –∑–∞–π–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ ‚è≥",
        parse_mode='Markdown'
    )
    
    recommendations = openai_advisor.get_gift_recommendations(prompt, message.from_user.id)
    
    if recommendations:
        response = "üéØ *–ò–î–ï–ò –ü–û–î–ê–†–ö–û–í –ü–û –ò–ù–¢–ï–†–ï–°–ê–ú*\n\n"
        
        for i, gift in enumerate(recommendations.get('recommendations', [])[:5], 1):
            response += f"{i}. *{gift.get('–Ω–∞–∑–≤–∞–Ω–∏–µ', '')}*\n"
            response += f"   üí∞ {gift.get('—Ü–µ–Ω–∞', '')}\n"
            response += f"   üìù {gift.get('–æ–ø–∏—Å–∞–Ω–∏–µ', '')}\n\n"
        
        bot.send_message(message.chat.id, response, parse_mode='Markdown')
    else:
        bot.send_message(message.chat.id, "üòî –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")

def process_openai_creative(message):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –∏–¥–µ–π"""
    query = message.text
    
    bot.send_message(
        message.chat.id,
        "ü§ñ *OpenAI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –∏–¥–µ–∏...*\n\n–≠—Ç–æ –∑–∞–π–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ ‚è≥",
        parse_mode='Markdown'
    )
    
    creative_ideas = openai_advisor.get_creative_ideas(query)
    
    if creative_ideas and 'ideas' in creative_ideas:
        response = "üé® *–ö–†–ï–ê–¢–ò–í–ù–´–ï –ò–î–ï–ò –ü–û–î–ê–†–ö–û–í*\n\n"
        
        for i, idea in enumerate(creative_ideas['ideas'][:5], 1):
            response += f"{i}. *{idea.get('–Ω–∞–∑–≤–∞–Ω–∏–µ', '')}*\n"
            response += f"   üí° {idea.get('–æ–ø–∏—Å–∞–Ω–∏–µ', '')}\n"
            response += f"   üí∞ {idea.get('—Ü–µ–Ω–∞', '')}\n\n"
        
        bot.send_message(message.chat.id, response, parse_mode='Markdown')
    else:
        bot.send_message(message.chat.id, "üòî –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–¥–µ–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")

def process_openai_custom(message):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞"""
    query = message.text
    
    bot.send_message(
        message.chat.id,
        "ü§ñ *OpenAI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à –∑–∞–ø—Ä–æ—Å...*\n\n–≠—Ç–æ –∑–∞–π–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ ‚è≥",
        parse_mode='Markdown'
    )
    
    recommendations = openai_advisor.get_gift_recommendations(query, message.from_user.id)
    
    if recommendations:
        response = "‚ú® *–ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò OPENAI*\n\n"
        
        for i, gift in enumerate(recommendations.get('recommendations', [])[:5], 1):
            response += f"{i}. *{gift.get('–Ω–∞–∑–≤–∞–Ω–∏–µ', '')}*\n"
            response += f"   üí∞ {gift.get('—Ü–µ–Ω–∞', '')}\n"
            response += f"   üìù {gift.get('–æ–ø–∏—Å–∞–Ω–∏–µ', '')}\n\n"
        
        bot.send_message(message.chat.id, response, parse_mode='Markdown')
    else:
        bot.send_message(message.chat.id, "üòî –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")

def process_gift_request(message):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞"""
    user_id = message.from_user.id
    request_text = message.text
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
    gift_assistant.add_to_history(user_id, request_text)
    
    # –ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞
    bot.send_message(message.chat.id, "üîç –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –≤–∞—à –∑–∞–ø—Ä–æ—Å...")
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
    response = (
        "‚úÖ *–ó–ê–ü–†–û–° –ü–†–ò–ù–Ø–¢!*\n\n"
        "üîç *–ß–¢–û –î–ê–õ–¨–®–ï?*\n\n"
        "1Ô∏è‚É£ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–¥–±–æ—Ä–∞\n"
        "2Ô∏è‚É£ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ **OpenAI –ü–æ–¥–±–æ—Ä** –¥–ª—è —É–º–Ω–æ–≥–æ –ø–æ–¥–±–æ—Ä–∞\n"
        "3Ô∏è‚É£ –ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏ —Å –ø–æ–¥–∞—Ä–∫–∞–º–∏\n\n"
        "üìå *–ò–õ–ò –í–´–ë–ï–†–ò–¢–ï –ù–ò–ñ–ï:*"
    )
    
    bot.send_message(message.chat.id, response, parse_mode='Markdown')
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    markup = gift_assistant.create_main_menu()
    bot.send_message(
        message.chat.id,
        "üëá *–í–´–ë–ï–†–ò–¢–ï –ö–ê–¢–ï–ì–û–†–ò–Æ:*",
        reply_markup=markup,
        parse_mode='Markdown'
    )

@bot.message_handler(func=lambda message: True)
def handle_all_messages(message):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    response = (
        "üéÅ *–Ø - –ë–û–¢ –î–õ–Ø –ü–û–î–ë–û–†–ê –ü–û–î–ê–†–ö–û–í*\n\n"
        "ü§ñ *–ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø: OPENAI (DEEPSEEK)!*\n\n"
        "üëá *–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –ö–ù–û–ü–ö–ò –í –ú–ï–ù–Æ –ù–ò–ñ–ï:*\n\n"
        "‚Ä¢ –ù–∞–∂–º–∏—Ç–µ ü§ñ OPENAI –ü–û–î–ë–û–† –¥–ª—è —É–º–Ω–æ–≥–æ –ø–æ–¥–±–æ—Ä–∞\n"
        "‚Ä¢ –í—ã–±–∏—Ä–∞–π—Ç–µ –¥—Ä—É–≥–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\n"
        "‚Ä¢ –ü–æ–ª—É—á–∞–π—Ç–µ –∏–¥–µ–∏ –ø–æ–¥–∞—Ä–∫–æ–≤\n\n"
        "–≠—Ç–æ –Ω–∞–º–Ω–æ–≥–æ —É–¥–æ–±–Ω–µ–µ, —á–µ–º –ø–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç!"
    )
    
    bot.send_message(message.chat.id, response, parse_mode='Markdown')
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    markup = gift_assistant.create_main_menu()
    bot.send_message(
        message.chat.id,
        "üìå *–ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ*",
        reply_markup=markup,
        parse_mode='Markdown'
    )

if __name__ == '__main__':
    print("=" * 60)
    print("üéÅ –ë–û–¢-–ü–û–ú–û–©–ù–ò–ö –ü–û –ü–û–î–ë–û–†–£ –ü–û–î–ê–†–ö–û–í")
    print("ü§ñ –° –ò–ù–¢–ï–ì–†–ê–¶–ò–ï–ô OPENAI (DEEPSEEK)")
    print("=" * 60)
    print("üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:")
    print(f"   ‚Ä¢ –í–æ–∑—Ä–∞—Å—Ç–Ω—ã—Ö –≥—Ä—É–ø–ø: {len(GIFT_DATABASE['–≤–æ–∑—Ä–∞—Å—Ç'])}")
    print(f"   ‚Ä¢ –ü–æ–≤–æ–¥–æ–≤: {len(GIFT_DATABASE['–ø–æ–≤–æ–¥'])}")
    print(f"   ‚Ä¢ –ò–Ω—Ç–µ—Ä–µ—Å–æ–≤: {len(GIFT_DATABASE['–∏–Ω—Ç–µ—Ä–µ—Å—ã'])}")
    print(f"   ‚Ä¢ –ë—é–¥–∂–µ—Ç–æ–≤: {len(GIFT_DATABASE['–±—é–¥–∂–µ—Ç'])}")
    print(f"   ‚Ä¢ –¢–∏–ø–æ–≤ –ø–æ–¥–∞—Ä–∫–æ–≤: {len(GIFT_DATABASE['—Ç–∏–ø_–ø–æ–¥–∞—Ä–∫–∞'])}")
    print(f"   ‚Ä¢ –ü–æ–ª—É—á–∞—Ç–µ–ª–µ–π: {len(GIFT_DATABASE['–ø–æ–ª—É—á–∞—Ç–µ–ª—å'])}")
    print(f"   ‚Ä¢ –°–µ–∑–æ–Ω–Ω—ã—Ö: {len(GIFT_DATABASE['—Å–µ–∑–æ–Ω–Ω—ã–µ'])}")
    print(f"   ‚Ä¢ –ü–æ–ø—É–ª—è—Ä–Ω—ã—Ö: {len(GIFT_DATABASE['–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å'])}")
    print("=" * 60)
    print("ü§ñ OpenAI –∫–ª–∏–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!")
    print("üöÄ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
    print("‚úÖ –í—Å–µ –Ω–∞–¥–ø–∏—Å–∏ —Ç–µ–ø–µ—Ä—å —è–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∞–º–∏")
    print("=" * 60)
    
    try:
        bot.infinity_polling()
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞: {e}")
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")